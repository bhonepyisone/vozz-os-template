(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4407],{43681:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},88226:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},92735:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});let r=(0,n(79205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},48049:function(e,t,n){"use strict";var r=n(14397);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},40718:function(e,t,n){e.exports=n(48049)()},14397:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},53359:function(e,t,n){e.exports=n(25183)},7593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=(r=n(2265))&&r.__esModule?r:{default:r},i=n(35822),s=n(34112),c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return i.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,r=e.separator,a=e.enclosingCharacter,o=e.uFEFF,i=e.target,s=e.specs,c=e.replace;this.state.page=window.open(this.buildURI(t,o,n,r,a),i,s,c)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(o.default.Component);c.defaultProps=Object.assign(s.defaultProps,{target:"_blank"}),c.propTypes=s.propTypes,t.default=c},6065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(r=n(2265))&&r.__esModule?r:{default:r},s=n(35822),c=n(34112),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"buildURI",value:function(){return s.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,r=n.data,a=n.headers,o=n.separator,i=n.filename,c=n.enclosingCharacter,l=n.uFEFF,u=t&&"function"==typeof r?r():r,d=new Blob([l?"\uFEFF":"",(0,s.toCSV)(u,a,o,c)]);return window.navigator.msSaveBlob(d,i),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,function(n){if(!1===n){e.preventDefault();return}t.handleLegacy(e,!0)})}},{key:"handleSyncClick",value:function(e){if(!1===this.props.onClick(e)){e.preventDefault();return}this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"==typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.headers,o=t.separator,s=t.filename,c=t.uFEFF,l=t.children,u=(t.onClick,t.asyncOnClick,t.enclosingCharacter),d=function(e,t){var n={};for(var r in e)!(t.indexOf(r)>=0)&&Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),f="undefined"==typeof window?"":this.buildURI(n,c,r,o,u);return i.default.createElement("a",a({download:s},d,{ref:function(t){return e.link=t},target:"_self",href:f,onClick:this.handleClick()}),l)}}]),t}(i.default.Component);l.defaultProps=c.defaultProps,l.propTypes=c.propTypes,t.default=l},35822:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}var a=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},o=t.isJsons=function(e){return Array.isArray(e)&&e.every(function(e){return(void 0===e?"undefined":n(e))==="object"&&!(e instanceof Array)})},i=t.isArrays=function(e){return Array.isArray(e)&&e.every(function(e){return Array.isArray(e)})},s=t.jsonsHeaders=function(e){return Array.from(e.map(function(e){return Object.keys(e)}).reduce(function(e,t){return new Set([].concat(r(e),r(t)))},[]))},c=t.jsons2arrays=function(e,t){var n=t=t||s(e),a=t;return o(t)&&(n=t.map(function(e){return e.label}),a=t.map(function(e){return e.key})),[n].concat(r(e.map(function(e){return a.map(function(t){return l(t,e)})})))},l=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(e,t,n,r){var a=e[t];if(null!=a)return a;r.splice(1)},t);return void 0===n?e in t?t[e]:"":n},u=t.elementOrEmpty=function(e){return null==e?"":e},d=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter(function(e){return e}).map(function(e){return e.map(function(e){return u(e)}).map(function(e){return""+n+e+n}).join(t)}).join("\n")},f=t.arrays2csv=function(e,t,n,a){return d(t?[t].concat(r(e)):e,n,a)},p=t.jsons2csv=function(e,t,n,r){return d(c(e,t),n,r)},y=t.string2csv=function(e,t,n,r){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},h=t.toCSV=function(e,t,n,r){if(o(e))return p(e,t,n,r);if(i(e))return f(e,t,n,r);if("string"==typeof e)return y(e,t,n);throw TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,r,o){var i=h(e,n,r,o),s=a()?"application/csv":"text/csv",c=new Blob([t?"\uFEFF":"",i],{type:s}),l="data:"+s+";charset=utf-8,"+(t?"\uFEFF":"")+i,u=window.URL||window.webkitURL;return void 0===u.createObjectURL?l:u.createObjectURL(c)}},25183:function(e,t,n){"use strict";t.CSVLink=void 0;var r=o(n(7593)),a=o(n(6065));function o(e){return e&&e.__esModule?e:{default:e}}r.default,t.CSVLink=a.default},34112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0,(r=n(2265))&&r.__esModule;var r,a=n(40718);t.propTypes={data:(0,a.oneOfType)([a.string,a.array,a.func]).isRequired,headers:a.array,target:a.string,separator:a.string,filename:a.string,uFEFF:a.bool,onClick:a.func,asyncOnClick:a.bool,enclosingCharacter:a.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]},4407:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(57437),a=n(2265),o=n(8858),i=n(5978),s=n(66474),c=n(65696),l=n(86035),u=n(63070),d=n(27742),f=n(36502),p=n(85873),y=n(7641),h=n(43949),v=n(88226),m=n(43681),b=n(40673);let x=["Daily","Weekly","Monthly","Yearly"];function g(){let{t:e}=(0,h.$G)("common"),[t,n]=(0,a.useState)([]),[g,k]=(0,a.useState)(!0),[j,w]=(0,a.useState)("Daily"),[O,C]=(0,a.useState)({cash:0,card:0,grandTotal:0});return(0,a.useEffect)(()=>{let e,t;k(!0);let r=new Date;switch(j){case"Weekly":e=(0,c.z)(r,{weekStartsOn:1}),t=(0,l.v)(r,{weekStartsOn:1});break;case"Monthly":e=(0,u.N)(r),t=(0,d.V)(r);break;case"Yearly":e=(0,f.e)(r),t=(0,p.w)(r);break;default:(e=new Date).setHours(0,0,0,0),t=(0,y.i)(r)}let a=i.EK.fromDate(e),s=i.EK.fromDate(t),h=(0,i.hJ)(o.db,"sales"),v=(0,i.IO)(h,(0,i.ar)("createdAt",">=",a),(0,i.ar)("createdAt","<=",s),(0,i.Xo)("createdAt","desc")),m=(0,i.cf)(v,e=>{let t=e.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate()}));n(t);let r=0,a=0;t.forEach(e=>{let t=e.totalAmount||0;"Card"===e.paymentMethod?a+=t:r+=t}),C({cash:r,card:a,grandTotal:r+a}),k(!1)});return()=>m()},[j]),(0,r.jsxs)("div",{className:"bg-neo-bg p-6 rounded-2xl shadow-neo-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:e("SalesRecord")}),(0,r.jsx)("div",{className:"flex items-center bg-neo-bg p-1 rounded-lg shadow-neo-inset-active",children:x.map(t=>(0,r.jsx)("button",{onClick:()=>w(t),className:"px-3 py-1 text-sm font-semibold rounded-md transition-colors ".concat(j===t?"bg-neo-bg shadow-neo-md text-primary":"text-gray-600"),children:e(t)},t))})]}),(0,r.jsxs)("div",{className:"mb-4 pt-4 border-t border-neo-dark/20",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-md font-semibold text-gray-700",children:e("TotalsForPeriod")}),(0,r.jsx)(b.Z,{data:t,headers:[{label:"Date",key:"createdAt"},{label:"Total Amount",key:"totalAmount"},{label:"Payment Method",key:"paymentMethod"},{label:"Customer",key:"customerName"},{label:"Staff",key:"createdBy"}],filename:"sales_".concat(j,".csv")})]}),(0,r.jsxs)("div",{className:"flex justify-around text-center mt-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e("TotalCash")}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-600",children:O.cash.toFixed(2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e("TotalCard")}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-600",children:O.card.toFixed(2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e("GrandTotal")}),(0,r.jsx)("p",{className:"text-lg font-bold text-gray-900",children:O.grandTotal.toFixed(2)})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto pt-4",children:[g&&(0,r.jsx)("p",{children:"Loading sales..."}),!g&&0===t.length&&(0,r.jsx)("p",{children:e("NoSalesForPeriod")}),t.map(e=>{var t,n;return(0,r.jsxs)("div",{className:"p-3 border border-neo-dark/20 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("p",{className:"font-semibold",children:(null!==(n=e.totalAmount)&&void 0!==n?n:0).toFixed(2)}),"Card"===e.paymentMethod?(0,r.jsx)(v.Z,{className:"w-4 h-4 text-blue-500",title:"Card Payment"}):(0,r.jsx)(m.Z,{className:"w-4 h-4 text-green-500",title:"Cash Payment"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:(0,s.p)(e.createdAt,"p")})]}),(0,r.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:(null===(t=e.items)||void 0===t?void 0:t.map(e=>"".concat(e.quantity,"x ").concat(e.name)).join(", "))||"No items listed"})]},e.id)})]})]})}},40673:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(57437),a=n(53359),o=n(57598),i=n(92735);function s(e){let{data:t,filename:n,headers:s}=e,c=Array.isArray(t)?t:[];return(0,r.jsx)(a.CSVLink,{data:c,headers:s,filename:n,className:"no-underline",target:"_blank",children:(0,r.jsxs)(o.Z,{className:"!w-auto !px-4 !py-2 !text-xs",children:[(0,r.jsx)(i.Z,{className:"w-4 h-4 mr-2"}),"Export to CSV"]})})}},66474:function(e,t,n){"use strict";n.d(t,{p:function(){return a},x:function(){return o}});var r=n(97112);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";return e?(0,r.WU)(new Date(e),t):""}function o(e){return"number"!=typeof e?"":e.toLocaleString("en-US")}},7641:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(99649);function a(e){let t=(0,r.Q)(e);return t.setHours(23,59,59,999),t}},27742:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var r=n(99649);function a(e){let t=(0,r.Q)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},86035:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var r=n(99649),a=n(55528);function o(e,t){var n,o,i,s,c,l,u,d;let f=(0,a.j)(),p=null!==(d=null!==(u=null!==(l=null!==(c=null==t?void 0:t.weekStartsOn)&&void 0!==c?c:null==t?void 0:null===(o=t.locale)||void 0===o?void 0:null===(n=o.options)||void 0===n?void 0:n.weekStartsOn)&&void 0!==l?l:f.weekStartsOn)&&void 0!==u?u:null===(s=f.locale)||void 0===s?void 0:null===(i=s.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==d?d:0,y=(0,r.Q)(e),h=y.getDay();return y.setDate(y.getDate()+((h<p?-7:0)+6-(h-p))),y.setHours(23,59,59,999),y}},85873:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(99649);function a(e){let t=(0,r.Q)(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}},63070:function(e,t,n){"use strict";n.d(t,{N:function(){return a}});var r=n(99649);function a(e){let t=(0,r.Q)(e);return t.setDate(1),t.setHours(0,0,0,0),t}}}]);