"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9420],{87021:function(e,t,n){n.d(t,{Z:function(){return v}});var a=n(57437),s=n(2265),r=n(27648),l=n(58856),i=n(8858),o=n(5978),c=n(58293),d=n(77945),h=n(88906),m=n(94766),u=n(67815),x=n(66474),f=n(76865),b=n(97411);let g=e=>{let{type:t}=e;switch(t){case"Low Stock":return(0,a.jsx)(f.Z,{className:"w-5 h-5 text-yellow-500"});case"Leave Request":return(0,a.jsx)(b.Z,{className:"w-5 h-5 text-blue-500"});default:return(0,a.jsx)(m.Z,{className:"w-5 h-5 text-gray-400"})}};function p(e){let{isOpen:t}=e,[n,r]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{if(!t)return;let e=(0,o.hJ)(i.db,"notifications"),n=(0,o.IO)(e,(0,o.Xo)("createdAt","desc"),(0,o.b9)(10)),a=(0,o.cf)(n,e=>{r(e.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt.toDate()}))),c(!1)},e=>{console.error("Error fetching notifications:",e),c(!1)});return()=>a()},[t]),t)?(0,a.jsxs)("div",{className:"absolute top-20 right-8 w-80 bg-neo-bg rounded-2xl shadow-neo-lg border border-neo-dark/20 z-50",children:[(0,a.jsx)("div",{className:"p-4 border-b border-neo-dark/20",children:(0,a.jsx)("h3",{className:"font-semibold text-gray-800",children:"Notifications"})}),(0,a.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:[l&&(0,a.jsx)("p",{className:"p-4 text-center text-sm text-gray-500",children:"Loading..."}),!l&&0===n.length&&(0,a.jsx)("p",{className:"p-4 text-center text-sm text-gray-500",children:"No new notifications."}),n.map(e=>(0,a.jsxs)("div",{className:"p-4 flex items-start space-x-3 hover:bg-gray-200/50 border-b border-neo-dark/20",children:[(0,a.jsx)(g,{type:e.type}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-800",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,x.p)(e.createdAt,"PPp")})]})]},e.id))]})]}):null}var j=n(43949);let w=e=>{let{children:t,className:n="",...s}=e;return(0,a.jsx)("button",{...s,className:"w-12 h-12 flex items-center justify-center bg-neo-bg rounded-full shadow-neo-md text-gray-600 hover:text-primary active:shadow-neo-inset transition-all ".concat(n),children:t})};function v(e){let{toggleMobileNav:t,isMobile:n}=e,{user:x}=(0,l.t)(),[f,b]=(0,s.useState)(!1),[g,v]=(0,s.useState)(0),{i18n:y}=(0,j.$G)();return(0,s.useEffect)(()=>{let e=(0,o.hJ)(i.db,"notifications"),t=(0,o.cf)(e,e=>{v(e.size)});return()=>t()},[]),(0,a.jsxs)("header",{className:"h-20 bg-neo-bg flex items-center justify-between px-4 md:px-8",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:n&&(0,a.jsx)(w,{onClick:t,className:"md:hidden",children:(0,a.jsx)(c.Z,{className:"w-6 h-6"})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-6",children:[(0,a.jsx)(w,{onClick:()=>{let e="en"===y.language?"th":"en";y.changeLanguage(e)},title:"Change Language",className:"hidden md:flex",children:(0,a.jsx)(d.Z,{className:"w-6 h-6"})}),(null==x?void 0:x.role)==="Admin"&&(0,a.jsx)(r.default,{href:"/admin",children:(0,a.jsxs)("button",{className:"hidden md:flex items-center space-x-2 px-4 py-2 bg-neo-bg rounded-lg shadow-neo-md text-gray-700 font-semibold hover:text-primary active:shadow-neo-inset transition-colors",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Admin Panel"})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w,{onClick:()=>b(e=>!e),children:(0,a.jsx)(m.Z,{className:"w-6 h-6"})}),g>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center border-2 border-neo-bg",children:g}),(0,a.jsx)(p,{isOpen:f})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-3 bg-neo-bg shadow-neo-md p-2 rounded-full",children:[(0,a.jsx)(u.Z,{className:"w-10 h-10 text-gray-400"}),(0,a.jsxs)("div",{className:"pr-2",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:(null==x?void 0:x.name)||"Guest"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(null==x?void 0:x.role)||"No Role"})]})]})]})]})}},71121:function(e,t,n){n.d(t,{Z:function(){return A}});var a=n(57437),s=n(27648),r=n(99376),l=n(58856),i=n(43949),o=n(25466),c=n(97411),d=n(36321),h=n(16275),m=n(71769),u=n(59426),x=n(88997),f=n(95805),b=n(43681),g=n(6830),p=n(98728),j=n(88906),w=n(43044),v=n(34763),y=n(47692),N=n(52264),Z=n(35224);let k=[{href:"/dashboard",label:"Dashboard",icon:o.Z},{href:"/attendance",label:"Attendance",icon:c.Z},{href:"/reimbursements",label:"Reimbursements",icon:d.Z}],S=[{href:"/dashboard",label:"Dashboard",icon:o.Z},{href:"/pos",label:"POS",icon:h.Z},{href:"/menu",label:"Menu",icon:m.Z},{href:"/inventory",label:"Inventory",icon:u.Z},{href:"/attendance",label:"Attendance",icon:c.Z},{href:"/crm",label:"CRM",icon:x.Z},{href:"/reimbursements",label:"Reimbursements",icon:d.Z}],z=[{href:"/dashboard",label:"Dashboard",icon:o.Z},{href:"/pos",label:"POS",icon:h.Z},{href:"/menu",label:"Menu",icon:m.Z},{href:"/inventory",label:"Inventory",icon:u.Z},{href:"/attendance",label:"Attendance",icon:c.Z},{href:"/crm",label:"CRM",icon:x.Z},{href:"/hrm",label:"HRM",icon:f.Z},{href:"/reimbursements",label:"Reimbursements",icon:d.Z},{href:"/financials",label:"Financials",icon:b.Z},{href:"/reports",label:"Reports",icon:g.Z},{href:"/settings",label:"Settings",icon:p.Z}],C=[{href:"/admin",label:"Admin Dashboard",icon:j.Z},{href:"/admin/shops",label:"Shop Management",icon:u.Z},{href:"/admin/users",label:"User Management",icon:f.Z},{href:"/admin/checklists",label:"Checklists",icon:w.Z},{href:"/admin/system",label:"System Settings",icon:p.Z}];function A(e){let{isAdmin:t=!1,isCollapsed:n,toggleSidebar:o,isMobile:c,isMobileNavOpen:d}=e,h=(0,r.usePathname)(),m=(0,r.useRouter)(),{user:u,logout:x}=(0,l.t)(),{t:f}=(0,i.$G)("common"),b=[];if(t)b=C;else switch(null==u?void 0:u.role){case"Admin":case"Management":b=z;break;case"Front Desk":b=S;break;case"Staff":b=k;break;default:b=[]}let g=async()=>{await x(),m.push("/login")};return(0,a.jsxs)("aside",{className:c?"fixed top-0 left-0 h-full bg-neo-bg flex flex-col shadow-neo-lg z-20 transition-transform duration-300 ease-in-out ".concat(d?"translate-x-0":"-translate-x-full"," w-64"):"relative bg-neo-bg flex flex-col shadow-neo-lg z-10 transition-all duration-300 ".concat(n?"w-20":"w-64"),children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-20",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-700 ".concat(n&&!c?"hidden":"block"),children:"Vozz OS"})}),(0,a.jsx)("nav",{className:"flex-1 px-4 py-4 space-y-2",children:b.map(e=>{let t=h.startsWith(e.href),r=e.icon;return(0,a.jsxs)(s.default,{href:e.href,className:"flex items-center px-4 py-2.5 rounded-lg transition-all duration-200 ".concat(t?"bg-neo-bg shadow-neo-inset-active text-primary":"text-gray-600 hover:text-primary"," ").concat(n&&!c?"justify-center":""),children:[(0,a.jsx)(r,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"ml-4 text-sm font-medium ".concat(n&&!c?"hidden":"block"),children:f(e.label)})]},e.label)})}),(0,a.jsxs)("div",{className:"px-4 py-4 border-t border-neo-dark/30 space-y-2",children:[t&&(0,a.jsx)(s.default,{href:"/dashboard",children:(0,a.jsxs)("div",{className:"flex items-center w-full px-4 py-2.5 rounded-lg text-green-600 hover:text-primary transition-all duration-200 active:shadow-neo-inset-active ".concat(n&&!c?"justify-center":""),children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"ml-4 text-sm font-medium ".concat(n&&!c?"hidden":"block"),children:"Return to Dashboard"})]})}),(0,a.jsxs)("button",{onClick:g,className:"flex items-center w-full px-4 py-2.5 rounded-lg text-gray-600 hover:text-primary transition-all duration-200 active:shadow-neo-inset-active ".concat(n&&!c?"justify-center":""),children:[(0,a.jsx)(y.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"ml-4 text-sm font-medium ".concat(n&&!c?"hidden":"block"),children:"Logout"})]})]}),!c&&(0,a.jsx)("div",{className:"px-4 py-4 border-t border-neo-dark/30",children:(0,a.jsx)("button",{onClick:o,className:"flex items-center justify-center w-full py-2.5 rounded-lg text-gray-600 hover:text-primary transition-all duration-200 active:shadow-neo-inset-active",children:n?(0,a.jsx)(N.Z,{className:"w-5 h-5"}):(0,a.jsx)(Z.Z,{className:"w-5 h-5"})})})]})}},58856:function(e,t,n){n.d(t,{t:function(){return i}});var a=n(59625),s=n(8858),r=n(5978),l=n(43301);let i=(0,a.Ue)(e=>({user:null,loading:!0,fetchUser:()=>{(0,l.Aj)(s.I8,async t=>{if(t){let n=(0,r.JU)(s.db,"users",t.uid),a=await (0,r.QT)(n);a.exists()?e({user:{uid:a.id,...a.data()},loading:!1}):((0,l.w7)(s.I8),e({user:null,loading:!1}))}else e({user:null,loading:!1})})},login:async(t,n,a)=>{e({loading:!0});try{let e=a?l.a$:l.aT;await (0,l.Fb)(s.I8,e),await (0,l.e5)(s.I8,t,n)}catch(t){throw console.error("Login failed:",t),e({user:null,loading:!1}),t}},logout:async()=>{e({loading:!0}),await (0,l.w7)(s.I8)}}));i.getState().fetchUser()},8858:function(e,t,n){let a;n.d(t,{I8:function(){return o},db:function(){return c}});var s=n(738),r=n(43301),l=n(5978),i=n(13491);a=(0,s.C6)().length?(0,s.C6)()[0]:(0,s.ZF)({apiKey:"AIzaSyBc-lay18YWj7GGVQsMpeGOQ6FG2Bjv4Ug",authDomain:"vozz-os-template.firebaseapp.com",projectId:"vozz-os-template",storageBucket:"vozz-os-template.firebasestorage.app",messagingSenderId:"790770638358",appId:"1:790770638358:web:cb155fd1022b9d6eb39f37"});let o=(0,r.v0)(a),c=(0,l.ad)(a);(0,i.$C)(a)},10863:function(e,t,n){n.d(t,{i:function(){return s}});var a=n(2265);function s(){let[e,t]=(0,a.useState)({width:void 0,height:void 0});return(0,a.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e}},66474:function(e,t,n){n.d(t,{p:function(){return s},x:function(){return r}});var a=n(97112);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";return e?(0,a.WU)(new Date(e),t):""}function r(e){return"number"!=typeof e?"":e.toLocaleString("en-US")}}}]);