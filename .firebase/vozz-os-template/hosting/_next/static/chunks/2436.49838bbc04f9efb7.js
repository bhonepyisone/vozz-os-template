"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2436],{22436:function(e,a,t){t.r(a),t.d(a,{default:function(){return u}});var s=t(57437),r=t(2265),l=t(8858),n=t(5978),c=t(97983);let o=(0,t(79205).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var d=t(63295),i=t(57598);function u(e){let{isOpen:a,onClose:t,onSelectCustomer:u}=e,[m,x]=(0,r.useState)([]),[h,y]=(0,r.useState)(""),[f,p]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!a)return;let e=(0,n.hJ)(l.db,"customers"),t=(0,n.cf)(e,e=>{x(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>t()},[a]);let v=async()=>{if(f.trim())try{let e=await (0,n.ET)((0,n.hJ)(l.db,"customers"),{name:f,email:"",totalSpend:0,tier:"Bronze"});u({id:e.id,name:f}),p("")}catch(e){console.error("Error adding new customer: ",e)}},w=m.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()));return(0,s.jsx)(c.Z,{isOpen:a,onClose:t,title:"Select or Add Customer",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(d.Z,{type:"text",placeholder:"Search for a customer...",value:h,onChange:e=>y(e.target.value)}),(0,s.jsx)("div",{className:"max-h-48 overflow-y-auto space-y-2 p-2 bg-neo-bg shadow-neo-inset rounded-lg",children:w.map(e=>(0,s.jsx)("button",{onClick:()=>u(e),className:"w-full text-left p-2 rounded-md hover:bg-gray-300/50",children:e.name},e.id))}),(0,s.jsxs)("div",{className:"border-t border-neo-dark/20 pt-4 space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium",children:"Add New Customer"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(d.Z,{type:"text",placeholder:"New customer name...",value:f,onChange:e=>p(e.target.value),className:"flex-1"}),(0,s.jsx)(i.Z,{onClick:v,className:"!w-auto !p-3 !text-green-600",children:(0,s.jsx)(o,{className:"w-5 h-5"})})]})]})]})})}}}]);