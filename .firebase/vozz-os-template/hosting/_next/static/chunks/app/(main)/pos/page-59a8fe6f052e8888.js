(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1361],{92941:function(e,t,s){Promise.resolve().then(s.bind(s,18184))},18184:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var a=s(57437),n=s(2265),l=s(30166),r=s(8858),i=s(5978),o=s(58856),c=s(43949),d=s(26937),m=s(18930),u=s(97983);let x=["Open","Seated","Order Taken","Food Served","Bill Printed","Needs Cleaning","Reserved"];function h(e){let{isOpen:t,onClose:s,table:n,onStatusChange:l}=e;return t&&n?(0,a.jsx)(u.Z,{isOpen:t,onClose:s,title:"Update Status for ".concat(n.name),children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:x.map(e=>(0,a.jsx)("button",{onClick:()=>l(n.id,e),className:"p-4 rounded-lg text-center font-semibold transition-colors ".concat(n.status===e?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"),children:e},e))})}):null}var b=s(57598),g=s(41507),p=s(30387);let f=e=>{let{table:t,onSelect:s,isSelected:n}=e,{t:l}=(0,c.$G)("common"),r={Open:"text-green-600",Seated:"text-blue-600","Order Taken":"text-indigo-600","Food Served":"text-purple-600","Bill Printed":"text-yellow-700","Needs Cleaning":"text-red-600",Reserved:"text-gray-600"};return(0,a.jsxs)("div",{onClick:()=>s(t),className:"".concat("w-24 h-24 flex flex-col items-center justify-center rounded-lg cursor-pointer transition-all duration-200 bg-neo-bg"," ").concat(n?"shadow-neo-inset-active":"shadow-neo-md"),children:[(0,a.jsx)("p",{className:"font-bold text-xl ".concat(r[t.status]||"text-gray-700"),children:t.name}),(0,a.jsx)("p",{className:"text-center text-xs font-semibold mt-1 ".concat(r[t.status]||"text-gray-700"),children:l(t.status)})]})};function j(e){let{onTableSelect:t,selectedTable:s}=e,{t:l}=(0,c.$G)("common"),[o,u]=(0,n.useState)([]),[x,j]=(0,n.useState)(null),[v,y]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),[C,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=(0,i.IO)((0,i.hJ)(r.db,"tables"),(0,i.Xo)("order")),t=(0,i.cf)(e,e=>{u(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>t()},[]);let k=e=>{j(e),y(!0)},O=async(e,t)=>{let s=(0,i.JU)(r.db,"tables",e);await (0,i.r7)(s,{status:t}),y(!1)},I=async()=>{let e="T".concat(o.length+1);await (0,i.ET)((0,i.hJ)(r.db,"tables"),{name:e,status:"Open",order:o.length+1})},Z=async()=>{C&&(await (0,i.oe)((0,i.JU)(r.db,"tables",C.id)),S(null),w(!1))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.Z,{title:l("FloorPlan"),children:[(0,a.jsx)("div",{className:"flex justify-end items-center mb-4",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(b.Z,{onClick:I,className:"!w-auto !p-2 !rounded-full !text-green-600",children:(0,a.jsx)(d.Z,{})}),(0,a.jsx)(b.Z,{onClick:()=>{o.length>0&&(S(o[o.length-1]),w(!0))},className:"!w-auto !p-2 !rounded-full !text-red-600",children:(0,a.jsx)(m.Z,{})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:o.map(e=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f,{table:e,onSelect:t,isSelected:(null==s?void 0:s.id)===e.id}),(0,a.jsx)("button",{onClick:()=>k(e),className:"absolute top-1 right-1 text-xs bg-black/20 text-white rounded-full px-1.5 py-0.5 hover:bg-black/50",children:"Edit"})]},e.id))})]}),(0,a.jsx)(h,{isOpen:v,onClose:()=>y(!1),table:x,onStatusChange:O}),(0,a.jsxs)(g.default,{isOpen:N,onClose:()=>w(!1),onConfirm:Z,title:"Delete Table",children:['Are you sure you want to remove table "',null==C?void 0:C.name,'"?']})]})}var v=s(92369),y=s(32489),N=s(82284),w=s(63295);function C(e){let{orderItems:t,onProcessPayment:s,onRemoveItem:n,selectedCustomer:l,onSelectCustomerClick:r,selectedTable:i,onClearOrder:o,taxPercent:d,onTaxChange:m,promoPercent:u,onPromoChange:x,subtotal:h,promoAmount:g,taxAmount:p,total:f}=e,{t:j}=(0,c.$G)("common");return(0,a.jsxs)("div",{className:"bg-neo-bg p-6 rounded-2xl shadow-neo-lg flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:j("CurrentOrder")}),i&&(0,a.jsxs)("span",{className:"px-3 py-1 text-sm font-bold bg-neo-bg text-primary rounded-full shadow-neo-md",children:[j("Table"),": ",i.name]})]}),(0,a.jsxs)("div",{className:"mb-4 p-3 border border-neo-dark/20 rounded-lg flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 mr-3 text-gray-400"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:l?l.name:j("WalkInCustomer")})]}),(0,a.jsx)("button",{onClick:r,className:"text-sm text-primary hover:underline",children:j(l?"Change":"Select")})]}),(0,a.jsx)("div",{className:"flex-1 space-y-3 overflow-y-auto",children:t.length>0?t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.quantity," x ",e.price.toLocaleString()]})]}),(0,a.jsx)("p",{className:"font-semibold w-24 text-right",children:(e.price*e.quantity).toLocaleString()}),(0,a.jsx)("button",{onClick:()=>n(t),className:"ml-2 p-1 text-gray-400 hover:text-red-500",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})]},"".concat(e.id,"-").concat(t))):(0,a.jsx)("div",{className:"text-center text-gray-500 py-10",children:(0,a.jsx)("p",{children:j("SelectItemsPrompt")})})}),(0,a.jsxs)("div",{className:"mt-4 border-t border-neo-dark/20 pt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsx)("span",{children:j("Subtotal")}),(0,a.jsx)("span",{children:h.toLocaleString(void 0,{minimumFractionDigits:2})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-1",children:j("Promo")}),(0,a.jsx)(w.Z,{type:"number",value:u,onChange:x,className:"!w-12 !p-1 !my-0 text-center",placeholder:"0"}),(0,a.jsx)("span",{className:"ml-1",children:"%"})]}),(0,a.jsxs)("span",{className:"text-red-500",children:["-",g.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-1",children:j("Tax")}),(0,a.jsx)(w.Z,{type:"number",value:d,onChange:m,className:"!w-12 !p-1 !my-0 text-center",placeholder:"0"}),(0,a.jsx)("span",{className:"ml-1",children:"%"})]}),(0,a.jsx)("span",{children:p.toLocaleString(void 0,{minimumFractionDigits:2})})]}),(0,a.jsxs)("div",{className:"flex justify-between text-xl font-bold text-gray-900",children:[(0,a.jsx)("span",{children:j("Total")}),(0,a.jsx)("span",{children:f.toLocaleString(void 0,{minimumFractionDigits:2})})]}),(0,a.jsxs)("div",{className:"flex space-x-2 mt-4",children:[(0,a.jsx)(b.Z,{onClick:o,disabled:0===t.length,className:"!w-1/4 !text-red-600",children:(0,a.jsx)(N.Z,{className:"w-5 h-5"})}),(0,a.jsx)(b.Z,{onClick:s,disabled:0===t.length,className:"!w-3/4",children:j("ProcessPayment")})]})]})]})}var S=s(73247);let k=e=>{let{item:t,onSelect:s}=e;return(0,a.jsxs)("button",{onClick:()=>s(t),className:"bg-neo-bg p-4 rounded-lg text-center cursor-pointer transition-all shadow-neo-md hover:text-primary active:shadow-neo-inset",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:t.image}),(0,a.jsx)("h4",{className:"font-semibold text-gray-800 text-sm",children:t.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.price.toLocaleString()})]})};function O(e){let{onAddItem:t}=e,{t:s}=(0,c.$G)("common"),[l,o]=(0,n.useState)([]),[d,m]=(0,n.useState)(!0),[u,x]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=(0,i.hJ)(r.db,"menu"),t=(0,i.cf)(e,e=>{o(e.docs.map(e=>({id:e.id,...e.data()}))),m(!1)});return()=>t()},[]);let h=(0,n.useMemo)(()=>l.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())).reduce((e,t)=>{let s=t.category||"Uncategorized";return e[s]||(e[s]=[]),e[s].push(t),e},{}),[l,u]);return(0,a.jsxs)("div",{className:"bg-neo-bg p-6 rounded-2xl shadow-neo-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:s("Menu")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(S.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)(w.Z,{type:"text",placeholder:s("SearchMenu"),value:u,onChange:e=>x(e.target.value),className:"pl-10 !w-64"})]})]}),d?(0,a.jsx)("div",{className:"text-center text-gray-500",children:s("LoadingMenu")}):(0,a.jsx)("div",{className:"space-y-6",children:Object.entries(h).map(e=>{let[s,n]=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-600 mb-3 border-b border-neo-dark/30 pb-2",children:s}),(0,a.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:n.map(e=>(0,a.jsx)(k,{item:e,onSelect:t},e.id))})]},s)})})]})}var I=s(51817),Z=s(17625);let P=(0,l.default)(()=>s.e(6190).then(s.bind(s,36190)),{loadableGenerated:{webpack:()=>[36190]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(I.Z,{className:"w-8 h-8 text-primary animate-spin"})})}),T=(0,l.default)(()=>s.e(2436).then(s.bind(s,22436)),{loadableGenerated:{webpack:()=>[22436]},ssr:!1}),J=(0,l.default)(()=>Promise.all([s.e(7112),s.e(4407)]).then(s.bind(s,4407)),{loadableGenerated:{webpack:()=>[4407]},ssr:!1}),U=(0,l.default)(()=>s.e(244).then(s.bind(s,80244)),{loadableGenerated:{webpack:()=>[80244]},ssr:!1}),A=(0,l.default)(()=>Promise.resolve().then(s.bind(s,41507)),{loadableGenerated:{webpack:()=>[41507]},ssr:!1}),G=(0,l.default)(()=>Promise.all([s.e(7112),s.e(2676)]).then(s.bind(s,82676)),{loadableGenerated:{webpack:()=>[82676]},ssr:!1});function F(){let{user:e}=(0,o.t)(),[t,s]=(0,n.useState)([]),[l,c]=(0,n.useState)(null),[d,m]=(0,n.useState)(null),[u,x]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[v,y]=(0,n.useState)(7),[N,w]=(0,n.useState)(0),[S,k]=(0,n.useState)(""),[I,F]=(0,n.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[L,E]=(0,n.useState)(null),[q,z]=(0,n.useState)(!1),{subtotal:B,promoAmount:D,taxAmount:M,total:$}=(0,n.useMemo)(()=>{let e=t.reduce((e,t)=>e+(t.price||0)*(t.quantity||0),0),s=Number(N),a=(isNaN(s)?0:s)/100*e,n=e-a,l=Number(v),r=(isNaN(l)?0:l)/100*n;return{subtotal:e,promoAmount:a,taxAmount:r,total:n+r}},[t,v,N]),_=(0,n.useCallback)(async(e,t,s)=>{if(!t)return;let a=e.reduce((e,t)=>e+(t.price||0)*(t.quantity||0),0),n=Number(N),l=isNaN(n)?0:n,o=l/100*a,c=a-o,d=Number(v),m=isNaN(d)?0:d,u=m/100*c,x={items:e,totalAmount:c+u,subtotal:a,promoPercent:l,promoAmount:o,taxPercent:m,taxAmount:u,tableId:t.id,tableName:t.name,customerId:(null==s?void 0:s.id)||null,customerName:(null==s?void 0:s.name)||"Walk-in"},h=(0,i.JU)(r.db,"tables",t.id);if(await (0,i.r7)(h,{customerName:x.customerName,orderTotal:x.totalAmount,activeOrder:{items:x.items.map(e=>({name:e.name,quantity:e.quantity}))}}),t.activeOrderId){let e=(0,i.JU)(r.db,"activeOrders",t.activeOrderId);await (0,i.pl)(e,x,{merge:!0})}else{let e=(0,i.JU)((0,i.hJ)(r.db,"activeOrders"));await (0,i.pl)(e,x),await (0,i.r7)(h,{activeOrderId:e.id,status:"Order Taken"})}},[v,N]);(0,n.useEffect)(()=>{d&&_(t,d,l)},[t,l,d,_]);let Q=(0,n.useCallback)(async e=>{if(m(e),e.activeOrderId){let n=(0,i.JU)(r.db,"activeOrders",e.activeOrderId),l=await (0,i.QT)(n);if(l.exists()){var t,a;let e=l.data();if(s(e.items||[]),y(null!==(t=e.taxPercent)&&void 0!==t?t:7),w(null!==(a=e.promoPercent)&&void 0!==a?a:0),e.customerId){let t=(0,i.JU)(r.db,"customers",e.customerId),s=await (0,i.QT)(t);s.exists()&&c({id:s.id,...s.data()})}else c(null)}}else s([]),c(null),y(7),w(0)},[]),R=async()=>{confirm("Are you sure you want to clear this order? This will reset the table.")&&(d&&d.activeOrderId&&(await (0,i.oe)((0,i.JU)(r.db,"activeOrders",d.activeOrderId)),await (0,i.r7)((0,i.JU)(r.db,"tables",d.id),{status:"Open",activeOrderId:null,customerName:null,orderTotal:null,activeOrder:null})),s([]),c(null),m(null))},W=async a=>{if(0===t.length||!e||!d)return;f(!0);let n={items:t,totalAmount:$,subtotal:B,promoAmount:D,promoPercent:Number(N)||0,taxAmount:M,taxPercent:Number(v)||0,paymentMethod:a,shopId:e.shopId,createdBy:e.uid,createdAt:i.EK.now(),customerId:(null==l?void 0:l.id)||null,customerName:(null==l?void 0:l.name)||"Walk-in",tableId:d.id};try{let e=[];for(let s of(await (0,i.i3)(r.db,async s=>{let a=[];for(let n of t)if(n.recipe&&n.recipe.length>0)for(let t of n.recipe){let l=(0,i.JU)(r.db,"inventory",t.inventoryId),o=await s.get(l);if(!o.exists())throw Error("Inventory item ".concat(t.name," not found!"));let c=o.data(),d=c.currentStock-t.quantity*n.quantity;a.push({ref:l,newStock:d}),e.push({name:c.name,newStock:d,minStock:c.minStock})}for(let e of(s.set((0,i.JU)((0,i.hJ)(r.db,"sales")),n),d.activeOrderId&&s.delete((0,i.JU)(r.db,"activeOrders",d.activeOrderId)),s.update((0,i.JU)(r.db,"tables",d.id),{status:"Needs Cleaning",activeOrderId:null,customerName:null,orderTotal:null,activeOrder:null}),a))s.update(e.ref,{currentStock:e.newStock})}),e))s.newStock<=s.minStock&&await (0,i.ET)((0,i.hJ)(r.db,"notifications"),{type:"Low Stock",message:"Heads up! '".concat(s.name,"' are running low. Current stock: ").concat(s.newStock),createdAt:i.EK.now()});E(n),k("Sale recorded and inventory updated!"),s([]),c(null),m(null),x(!1)}catch(e){console.error("Transaction failed: ",e),alert("Failed to process order: ".concat(e.message))}finally{f(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 h-full",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsx)(j,{onTableSelect:Q,selectedTable:d}),(0,a.jsx)(O,{onAddItem:e=>{if(!d){alert("Please select a table first!");return}s(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])}}),(0,a.jsx)(J,{})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(C,{orderItems:t,onProcessPayment:()=>x(!0),onRemoveItem:e=>{s(t=>t.filter((t,s)=>s!==e))},selectedCustomer:l,onSelectCustomerClick:()=>g(!0),selectedTable:d,onClearOrder:R,taxPercent:v,onTaxChange:e=>{y(e.target.value)},promoPercent:N,onPromoChange:e=>{w(e.target.value)},subtotal:B,promoAmount:D,taxAmount:M,total:$})})]}),(0,a.jsx)(P,{isOpen:u,onClose:()=>x(!1),onConfirm:W,total:$,isLoading:p}),(0,a.jsx)(T,{isOpen:h,onClose:()=>g(!1),onSelectCustomer:e=>{c(e),g(!1)}}),(0,a.jsx)(U,{isOpen:!!S,onClose:()=>k(""),title:"Success!",actions:(0,a.jsxs)(b.Z,{onClick:()=>z(!0),className:"!text-blue-600",children:[(0,a.jsx)(Z.Z,{className:"w-5 h-5 mr-2"}),"Print Receipt"]}),children:S}),(0,a.jsx)(G,{isOpen:q,onClose:()=>z(!1),order:L}),(0,a.jsx)(A,{isOpen:I.isOpen,onClose:()=>F({isOpen:!1}),onConfirm:I.onConfirm,title:I.title,children:I.message})]})}},30387:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,title:s,className:n="",...l}=e;return(0,a.jsxs)("div",{className:"bg-neo-bg p-6 rounded-2xl shadow-neo-lg ".concat(n),...l,children:[s&&(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b border-neo-dark/50 pb-2",children:s}),(0,a.jsx)("div",{className:"text-gray-600",children:t})]})}},41507:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(57437),n=s(97983),l=e=>{let{children:t,onClick:s,type:n="button",variant:l="primary",className:r="",...i}=e;return(0,a.jsx)("button",{type:n,onClick:s,className:"".concat("flex items-center justify-center px-4 py-2 text-sm font-bold border-transparent rounded-lg shadow-neo-md bg-neo-bg transition-all active:shadow-neo-inset disabled:opacity-50"," ").concat({primary:"text-primary hover:text-indigo-600",secondary:"text-gray-700 hover:text-gray-900",danger:"text-red-600 hover:text-red-700"}[l]," ").concat(r),...i,children:t})},r=s(76865);function i(e){let{isOpen:t,onClose:s,onConfirm:i,title:o="Are you sure?",children:c}=e;return t?(0,a.jsxs)(n.Z,{isOpen:t,onClose:s,title:o,children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,a.jsx)(r.Z,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:o}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:c||"This action cannot be undone."})})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)(l,{type:"button",variant:"danger",onClick:i,children:"Confirm"}),(0,a.jsx)(l,{type:"button",variant:"secondary",onClick:s,children:"Cancel"})]})]}):null}},97983:function(e,t,s){"use strict";var a=s(57437),n=s(32489),l=s(30387);t.Z=e=>{let{isOpen:t,onClose:s,title:r,children:i}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.Z,{title:r,className:"w-full max-w-lg relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-neo-bg rounded-full shadow-neo-md text-gray-500 hover:text-red-500 active:shadow-neo-inset",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})}),(0,a.jsx)("div",{children:i})]})}):null}},57598:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,className:s="",...n}=e;return(0,a.jsx)("button",{...n,className:"w-full p-3 bg-neo-bg rounded-lg font-bold text-gray-700 shadow-neo-md transition-all hover:text-primary active:shadow-neo-inset disabled:opacity-50 flex items-center justify-center space-x-2 ".concat(s),children:t})}},63295:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{className:t="",...s}=e;return(0,a.jsx)("input",{...s,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none text-sm ".concat(t)})}},58856:function(e,t,s){"use strict";s.d(t,{t:function(){return i}});var a=s(59625),n=s(8858),l=s(5978),r=s(43301);let i=(0,a.Ue)(e=>({user:null,loading:!0,fetchUser:()=>{(0,r.Aj)(n.I8,async t=>{if(t){let s=(0,l.JU)(n.db,"users",t.uid),a=await (0,l.QT)(s);a.exists()?e({user:{uid:a.id,...a.data()},loading:!1}):((0,r.w7)(n.I8),e({user:null,loading:!1}))}else e({user:null,loading:!1})})},login:async(t,s,a)=>{e({loading:!0});try{let e=a?r.a$:r.aT;await (0,r.Fb)(n.I8,e),await (0,r.e5)(n.I8,t,s)}catch(t){throw console.error("Login failed:",t),e({user:null,loading:!1}),t}},logout:async()=>{e({loading:!0}),await (0,r.w7)(n.I8)}}));i.getState().fetchUser()},8858:function(e,t,s){"use strict";let a;s.d(t,{I8:function(){return o},db:function(){return c}});var n=s(738),l=s(43301),r=s(5978),i=s(13491);a=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyBc-lay18YWj7GGVQsMpeGOQ6FG2Bjv4Ug",authDomain:"vozz-os-template.firebaseapp.com",projectId:"vozz-os-template",storageBucket:"vozz-os-template.firebasestorage.app",messagingSenderId:"790770638358",appId:"1:790770638358:web:cb155fd1022b9d6eb39f37"});let o=(0,l.v0)(a),c=(0,r.ad)(a);(0,i.$C)(a)}},function(e){e.O(0,[4358,9990,294,3949,8225,2971,2117,1744],function(){return e(e.s=92941)}),_N_E=e.O()}]);