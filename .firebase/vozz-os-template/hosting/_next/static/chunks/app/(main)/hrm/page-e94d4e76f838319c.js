(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1025],{46610:function(e,t,s){Promise.resolve().then(s.bind(s,50443))},50443:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eo}});var a=s(57437),n=s(2265),l=s(58856),r=s(43949),i=s(5978),c=s(8858),d=s(92369),o=s(89345),m=s(88906),x=s(31047),u=s(15868),h=s(18930),f=s(30387),p=s(57598),j=s(66474),y=s(40673);let b=e=>{let{status:t}=e,{t:s}=(0,r.$G)("common");return(0,a.jsx)("span",{className:"px-2.5 py-1 text-xs font-bold rounded-full bg-neo-bg shadow-neo-md ".concat({Active:"text-green-800 bg-green-100","On Leave":"text-yellow-800 bg-yellow-100",Inactive:"text-red-800 bg-red-100"}[t]||"bg-gray-100"),children:s(t)})};function g(e){let{onEdit:t,onDelete:s}=e,{t:l}=(0,r.$G)("common"),[g,v]=(0,n.useState)([]),[N,w]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let e=(0,i.hJ)(c.db,"users"),t=(0,i.cf)(e,e=>{v(e.docs.map(e=>({id:e.id,...e.data()}))),w(!1)},e=>{console.error("Error fetching staff:",e),w(!1)});return()=>t()},[]),N)?(0,a.jsx)("div",{className:"text-center text-gray-500 py-10",children:"Loading staff..."}):(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:l("StaffDirectory")}),(0,a.jsx)(y.Z,{data:g,headers:[{label:"Staff ID",key:"id"},{label:"Name",key:"name"},{label:"Email",key:"email"},{label:"Role",key:"role"},{label:"Join Date",key:"joinDate"}],filename:"staff_directory.csv"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(d.Z,{className:"inline w-4 h-4 mr-1"}),l("FullName")]}),(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(o.Z,{className:"inline w-4 h-4 mr-1"}),"Email"]}),(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(m.Z,{className:"inline w-4 h-4 mr-1"}),l("Role")]}),(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(x.Z,{className:"inline w-4 h-4 mr-1"}),l("JoinDate")]}),(0,a.jsx)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:l("Status")}),(0,a.jsx)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:l("Actions")})]})}),(0,a.jsx)("tbody",{children:g.map(e=>(0,a.jsxs)("tr",{className:"border-t border-neo-dark/20",children:[(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:e.name}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:e.email||"N/A"}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:e.role}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:e.joinDate?(0,j.p)(e.joinDate.toDate()):"N/A"}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsx)(b,{status:"Active"})}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(p.Z,{onClick:()=>t(e),className:"!w-auto !p-2 !rounded-full !text-blue-600",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)(p.Z,{onClick:()=>s(e),className:"!w-auto !p-2 !rounded-full !text-red-600",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})}var v=s(97112),N=s(63070),w=s(27742),S=s(73618);function k(e){let{setSuccessMessage:t}=e,{t:s}=(0,r.$G)("common"),[l,d]=(0,n.useState)([]),[o,m]=(0,n.useState)(0),[x,u]=(0,n.useState)(null),[h,j]=(0,n.useState)([]),[b,g]=(0,n.useState)(!1),k=(0,n.useCallback)(async(e,t,s)=>{let a=i.EK.fromDate(t),n=i.EK.fromDate(s),l=(0,i.hJ)(c.db,"attendance"),r=(0,i.IO)(l,(0,i.ar)("staffId","==",e.id),(0,i.ar)("scannedAt",">=",a),(0,i.ar)("scannedAt","<=",n)),d=(await (0,i.PL)(r)).size,o=e.baseSalary||0,m=e.kpiBonus||0,x=o/22*d,u=d>0?m:0;return{staffId:e.id,staffName:e.name,payPeriod:"".concat((0,v.WU)(t,"PPP")," - ").concat((0,v.WU)(s,"PPP")),baseSalary:o,daysWorked:d,proratedPay:x,bonus:u,totalPay:x+u}},[]);(0,n.useEffect)(()=>{let e=(0,i.hJ)(c.db,"users"),t=(0,i.cf)(e,e=>{d(e.docs.map(e=>({id:e.id,...e.data()})))}),s=(0,i.IO)((0,i.hJ)(c.db,"payroll_history"),(0,i.Xo)("runDate","desc")),a=(0,i.cf)(s,e=>{j(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{t(),a()}},[]),(0,n.useEffect)(()=>{(async()=>{if(0===l.length)return;let e=new Date,t=(0,N.N)(e),s=(0,w.V)(e),a=0;for(let e of l)e.baseSalary&&(a+=(await k(e,t,s)).totalPay);m(a)})()},[l,k]);let D=async()=>{g(!0);let e=new Date,s=(0,N.N)(e),a=(0,w.V)(e),n=0,r=[];for(let e of l)if(e.baseSalary){let t=await k(e,s,a);r.push(t),n+=t.totalPay}u(r),await (0,i.ET)((0,i.hJ)(c.db,"payroll_history"),{runDate:new Date,period:"".concat((0,v.WU)(s,"MMMM yyyy")),totalAmount:n,payslips:r}),await (0,i.ET)((0,i.hJ)(c.db,"expenses"),{description:"Payroll for ".concat((0,v.WU)(s,"MMMM yyyy")),category:"Labor",amount:n,date:new Date}),t({key:"PayrollFinalized"}),g(!1)},C=[{label:s("StaffName"),key:"staffName"},{label:s("BaseSalary"),key:"baseSalary"},{label:s("DaysWorkedInPeriod"),key:"daysWorked"},{label:s("ProratedPay"),key:"proratedPay"},{label:s("KPIBonus"),key:"bonus"},{label:s("TotalPay"),key:"totalPay"}];return(0,a.jsxs)(f.Z,{title:s("RunPayroll"),children:[(0,a.jsxs)("div",{className:"p-4 mb-6 text-center bg-neo-bg shadow-neo-inset rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s("EstimatedTotalSalaryExpenseThisMonth")}),(0,a.jsx)("p",{className:"text-3xl font-bold text-primary",children:o.toLocaleString(void 0,{minimumFractionDigits:2})})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)(p.Z,{onClick:D,disabled:b,children:[(0,a.jsx)(S.Z,{className:"w-5 h-5 mr-2"}),(0,a.jsx)("span",{children:b?s("Calculating"):s("FinalizeAndRecordPayroll")})]})}),x&&(0,a.jsxs)(f.Z,{title:s("ThisMonthsPayrollSummary"),children:[(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsx)(y.Z,{data:x,headers:C,filename:"payroll_".concat((0,v.WU)(new Date,"yyyy-MM"),".csv"),children:s("ExportToCSV")})}),(0,a.jsx)("div",{className:"space-y-2",children:x.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 border border-neo-dark/20 rounded-lg flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:e.staffName}),(0,a.jsx)("span",{className:"font-bold text-gray-900",children:e.totalPay.toFixed(2)})]},t))})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:s("PayrollHistory")}),(0,a.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:h.map(e=>(0,a.jsx)(f.Z,{className:"!shadow-neo-md",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:e.period}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[s("Total"),": ",e.totalAmount.toFixed(2)]})]}),(0,a.jsx)(y.Z,{data:e.payslips,headers:C,filename:"payroll_".concat(e.period.replace(" ","_"),".csv"),children:s("ExportToCSV")})]})},e.id))})]})]})}var D=s(30401),C=s(32489);function Z(e){let{setConfirmState:t,setSuccessMessage:s}=e,{t:l}=(0,r.$G)("common"),[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=(0,i.IO)((0,i.hJ)(c.db,"leave_requests"),(0,i.ar)("status","==","pending")),t=(0,i.cf)(e,e=>{o(e.docs.map(e=>({id:e.id,...e.data()}))),x(!1)});return()=>t()},[]);let u=(e,a)=>{t({isOpen:!0,title:"ConfirmAction",message:"ConfirmLeaveRequest",options:{action:l(a),status:l(a)},onConfirm:async()=>{let n=(0,i.JU)(c.db,"leave_requests",e.id);await (0,i.r7)(n,{status:a}),"approved"===a&&await (0,i.ET)((0,i.hJ)(c.db,"attendance"),{staffId:e.staffId,scannedAt:e.startDate,type:e.leaveType,details:"Approved leave from ".concat((0,j.p)(e.startDate.toDate())," to ").concat((0,j.p)(e.endDate.toDate()))}),s({key:"LeaveRequestProcessed",options:{status:l(a)}}),t({isOpen:!1})}})},h=[{label:l("RequestID"),key:"id"},{label:l("StaffName"),key:"staffName"},{label:l("LeaveType"),key:"leaveType"},{label:l("StartDate"),key:"startDate"},{label:l("EndDate"),key:"endDate"},{label:l("Reason"),key:"reason"}];return(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:l("PendingLeaveRequests")}),(0,a.jsx)(y.Z,{data:d,headers:h,filename:"pending_leave_requests.csv",children:l("ExportToCSV")})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[m&&(0,a.jsx)("p",{children:"Loading requests..."}),m||0!==d.length?d.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-neo-dark/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.staffName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.leaveType,":",(0,a.jsxs)("span",{className:"font-medium",children:[" ",(0,j.p)(e.startDate.toDate())," to ",(0,j.p)(e.endDate.toDate())]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{onClick:()=>u(e,"approved"),className:"!w-auto !p-2 !rounded-full !text-green-600",children:(0,a.jsx)(D.Z,{className:"w-5 h-5"})}),(0,a.jsx)(p.Z,{onClick:()=>u(e,"denied"),className:"!w-auto !p-2 !rounded-full !text-red-600",children:(0,a.jsx)(C.Z,{className:"w-5 h-5"})})]})]}),e.reason&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2 italic",children:[l("Reason"),": ",e.reason]})]},e.id)):(0,a.jsx)("p",{className:"text-center text-gray-500 py-4",children:l("NoPendingLeave")})]})]})}var E=s(65696),A=s(86035),P=s(36502),O=s(85873),R=s(7641),I=s(12527);let M=["Daily","Weekly","Monthly","Yearly"];function T(){let{t:e}=(0,r.$G)("common"),[t,s]=(0,n.useState)([]),[l,d]=(0,n.useState)(!0),[o,m]=(0,n.useState)("Daily");return(0,n.useEffect)(()=>{let e,t;d(!0);let a=new Date;switch(o){case"Weekly":e=(0,E.z)(a,{weekStartsOn:1}),t=(0,A.v)(a,{weekStartsOn:1});break;case"Monthly":e=(0,N.N)(a),t=(0,w.V)(a);break;case"Yearly":e=(0,P.e)(a),t=(0,O.w)(a);break;default:(e=new Date).setHours(0,0,0,0),t=(0,R.i)(a)}let n=i.EK.fromDate(e),l=i.EK.fromDate(t),r=(0,i.hJ)(c.db,"attendance"),m=(0,i.IO)(r,(0,i.ar)("scannedAt",">=",n),(0,i.ar)("scannedAt","<=",l),(0,i.Xo)("scannedAt","desc")),x=(0,i.cf)(m,e=>{s(e.docs.map(e=>({id:e.id,...e.data(),scannedAt:e.data().scannedAt.toDate()}))),d(!1)},e=>{console.error("Error fetching attendance records:",e),d(!1)});return()=>x()},[o]),(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:e("AttendanceLog")}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex items-center bg-neo-bg p-1 rounded-lg shadow-neo-inset-active",children:M.map(t=>(0,a.jsx)("button",{onClick:()=>m(t),className:"px-3 py-1 text-sm font-semibold rounded-md transition-colors ".concat(o===t?"bg-neo-bg shadow-neo-md text-primary":"text-gray-600"),children:e(t)},t))}),(0,a.jsx)(y.Z,{data:t,headers:[{label:"Date",key:"scannedAt"},{label:"Staff ID",key:"staffId"},{label:"Type",key:"type"},{label:"Details",key:"details"}],filename:"attendance_".concat(o,".csv")})]})]}),(0,a.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[l&&(0,a.jsx)("p",{children:"Loading records..."}),!l&&0===t.length&&(0,a.jsx)("p",{children:e("NoAttendanceForPeriod")}),t.map(e=>(0,a.jsxs)("div",{className:"p-3 border border-neo-dark/20 rounded-lg flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(I.Z,{className:"w-5 h-5 mr-3 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.staffId}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.type||"Clock-In/Out"})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(0,j.p)(e.scannedAt,"PPpp")})]},e.id))]})]})}var J=s(83229),F=s(63295),U=s(11511);function L(e){let{onEdit:t,setSuccessMessage:s}=e,{t:l}=(0,r.$G)("common"),[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let e=(0,i.hJ)(c.db,"users"),t=(0,i.cf)(e,e=>{o(e.docs.map(e=>({id:e.id,...e.data()}))),x(!1)});return()=>t()},[]),m)?(0,a.jsx)(f.Z,{title:l("ManageSalaryDetails"),children:(0,a.jsx)("p",{children:"Loading..."})}):(0,a.jsx)(f.Z,{title:l("ManageSalaryDetails"),children:(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>{var s,n;return(0,a.jsxs)("div",{className:"p-4 border border-neo-dark/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.name}),(0,a.jsx)(p.Z,{onClick:()=>t(e),className:"!w-auto !p-2 !rounded-full !text-blue-600",children:(0,a.jsx)(J.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-2 grid grid-cols-3 gap-4",children:[(0,a.jsxs)("span",{children:[l("BaseSalary"),": ",(null===(s=e.baseSalary)||void 0===s?void 0:s.toLocaleString())||"N/A"]}),(0,a.jsxs)("span",{children:[l("OvertimeRate"),": ",e.overtimeRate||"N/A","x"]}),(0,a.jsxs)("span",{children:[l("KPIBonus"),": ",(null===(n=e.kpiBonus)||void 0===n?void 0:n.toLocaleString())||"N/A"]})]})]},e.id)})})})}var _=s(26937),q=s(92934),B=s(40519);function G(e){var t;let{setSuccessMessage:s}=e,{t:l}=(0,r.$G)("common"),[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[j,y]=(0,n.useState)(""),[b,g]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=(0,i.cf)((0,i.hJ)(c.db,"users"),e=>{o(e.docs.map(e=>({id:e.id,...e.data()})))}),t=(0,i.cf)((0,i.hJ)(c.db,"checklist_templates"),e=>{x(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{e(),t()}},[]),(0,n.useEffect)(()=>{if(!j){h([]);return}let e=(0,i.IO)((0,i.hJ)(c.db,"assigned_checklists"),(0,i.ar)("staffId","==",j)),t=(0,i.cf)(e,e=>{h(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>t()},[j]);let v=async()=>{if(!j||!b){alert("Please select a staff member and a template.");return}let e=m.find(e=>e.id===b),t=d.find(e=>e.id===j);e&&t&&(await (0,i.ET)((0,i.hJ)(c.db,"assigned_checklists"),{staffId:j,staffName:t.name,templateId:b,templateName:e.name,items:e.items.map(e=>({text:e,completed:!1})),assignedAt:new Date}),s({key:"ChecklistAssigned",options:{templateName:e.name,staffName:t.name}}))},N=async(e,t)=>{let s=u.find(t=>t.id===e);if(!s)return;let a=[...s.items];a[t].completed=!a[t].completed;let n=(0,i.JU)(c.db,"assigned_checklists",e);await (0,i.r7)(n,{items:a})};return(0,a.jsxs)(f.Z,{title:l("AssignAndTrackChecklists"),children:[(0,a.jsxs)("div",{className:"p-4 border border-neo-dark/20 rounded-lg mb-6 flex items-end space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("SelectStaff")}),(0,a.jsxs)(U.Z,{value:j,onChange:e=>y(e.target.value),children:[(0,a.jsxs)("option",{value:"",children:["-- ",l("SelectStaff")," --"]}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("SelectTemplate")}),(0,a.jsxs)(U.Z,{value:b,onChange:e=>g(e.target.value),children:[(0,a.jsxs)("option",{value:"",children:["-- ",l("SelectTemplate")," --"]}),m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)(p.Z,{onClick:v,className:"!w-auto !px-4 !py-2.5",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5 mr-2"}),l("Assign")]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:j?"".concat(l("ChecklistsFor")," ").concat(null===(t=d.find(e=>e.id===j))||void 0===t?void 0:t.name):l("SelectStaffToViewChecklists")}),(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-neo-dark/20 rounded-lg",children:[(0,a.jsx)("p",{className:"font-bold",children:e.templateName}),(0,a.jsx)("ul",{className:"mt-2 space-y-2",children:e.items.map((t,s)=>(0,a.jsxs)("li",{onClick:()=>N(e.id,s),className:"flex items-center cursor-pointer group p-2 rounded-md hover:bg-neo-bg hover:shadow-neo-inset-active",children:[t.completed?(0,a.jsx)(q.Z,{className:"w-5 h-5 mr-3 text-green-500"}):(0,a.jsx)(B.Z,{className:"w-5 h-5 mr-3 text-gray-400 group-hover:text-primary"}),(0,a.jsx)("span",{className:"".concat(t.completed?"line-through text-gray-500":"text-gray-800"),children:t.text})]},s))})]},e.id))})]})]})}let K=e=>(0,a.jsx)("textarea",{...e,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none text-sm"});function $(e){let{setSuccessMessage:t}=e,{t:s}=(0,r.$G)("common"),{user:d}=(0,l.t)(),[o,m]=(0,n.useState)([]),[x,u]=(0,n.useState)(""),[h,y]=(0,n.useState)([]),[b,g]=(0,n.useState)(""),[v,N]=(0,n.useState)(""),[w,S]=(0,n.useState)(""),[k,D]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,i.cf)((0,i.hJ)(c.db,"users"),e=>{m(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>e()},[]),(0,n.useEffect)(()=>{if(!x){y([]);return}let e=(0,i.IO)((0,i.hJ)(c.db,"reviews"),(0,i.ar)("staffId","==",x)),t=(0,i.cf)(e,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>t.reviewDate.toDate()-e.reviewDate.toDate()),y(t)});return()=>t()},[x]);let C=async e=>{if(e.preventDefault(),x&&b){D(!0);try{let e=o.find(e=>e.id===x);await (0,i.ET)((0,i.hJ)(c.db,"reviews"),{staffId:x,staffName:e.name,reviewerId:d.uid,reviewerName:d.name,reviewDate:new Date,managerFeedback:b,employeeAssessment:v,goals:w}),t({key:"ReviewSaved"}),g(""),N(""),S("")}catch(e){console.error("Error saving review:",e)}finally{D(!1)}}};return(0,a.jsxs)(f.Z,{title:s("PerformanceReviews"),children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"staffSelectReview",className:"block text-sm font-medium text-gray-700 mb-1",children:s("SelectStaffToReview")}),(0,a.jsxs)(U.Z,{id:"staffSelectReview",value:x,onChange:e=>u(e.target.value),children:[(0,a.jsx)("option",{value:"",children:s("SelectAStaffMember")}),o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),x&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:s("CreateNewReview")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s("ManagerFeedback")}),(0,a.jsx)(K,{value:b,onChange:e=>g(e.target.value),rows:"4",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s("EmployeeSelfAssessment")}),(0,a.jsx)(K,{value:v,onChange:e=>N(e.target.value),rows:"4"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s("GoalsForNextPeriod")}),(0,a.jsx)(K,{value:w,onChange:e=>S(e.target.value),rows:"3"})]}),(0,a.jsxs)(p.Z,{type:"submit",disabled:k,children:[(0,a.jsx)(J.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:k?s("Saving"):s("SaveReview")})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:s("ReviewHistory")}),(0,a.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-3",children:h.length>0?h.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-neo-dark/20 rounded-lg",children:[(0,a.jsxs)("p",{className:"font-bold text-sm",children:["Review Date: ",(0,j.p)(e.reviewDate.toDate())]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Reviewed by: ",e.reviewerName]}),(0,a.jsxs)("details",{className:"mt-2",children:[(0,a.jsx)("summary",{className:"cursor-pointer text-sm font-medium text-primary",children:s("ViewDetails")}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-600 space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Feedback:"})," ",e.managerFeedback]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Self-Assessment:"})," ",e.employeeAssessment]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Goals:"})," ",e.goals]})]})]})]},e.id)):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s("NoPastReviews")})})]})]})]})}var z=s(44743);let W=e=>(0,a.jsx)("textarea",{...e,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none text-sm"});function V(e){let{setSuccessMessage:t}=e,{t:s}=(0,r.$G)("common"),{user:d}=(0,l.t)(),[o,m]=(0,n.useState)([]),[x,u]=(0,n.useState)(""),[h,j]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!d)return;let e=(0,i.hJ)(c.db,"users"),t=(0,i.cf)(e,e=>{m(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.id!==d.uid))});return()=>t()},[d]);let g=async e=>{if(e.preventDefault(),x&&h.trim()){b(!0);try{let e=o.find(e=>e.id===x);await (0,i.ET)((0,i.hJ)(c.db,"kudos"),{fromId:d.uid,fromName:d.name,toId:x,toName:e.name,message:h,createdAt:i.EK.now()}),t({key:"KudosSent",options:{name:e.name}}),u(""),j("")}catch(e){console.error("Error sending kudos:",e)}finally{b(!1)}}};return(0,a.jsxs)(f.Z,{title:s("GiveKudos"),children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:s("RecognizeColleague")}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"recipient",className:"block text-sm font-medium text-gray-700 mb-1",children:s("Recipient")}),(0,a.jsxs)(U.Z,{id:"recipient",value:x,onChange:e=>u(e.target.value),required:!0,children:[(0,a.jsx)("option",{value:"",children:s("SelectAColleague")}),o.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"kudosMessage",className:"block text-sm font-medium text-gray-700 mb-1",children:s("Message")}),(0,a.jsx)(W,{id:"kudosMessage",value:h,onChange:e=>j(e.target.value),rows:"3",required:!0})]}),(0,a.jsxs)(p.Z,{type:"submit",disabled:y,className:"!text-secondary",children:[(0,a.jsx)(z.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:s(y?"Saving":"SendKudos")})]})]})]})}var H=s(95805);function Q(){let[e,t]=(0,n.useState)(""),[s,l]=(0,n.useState)((0,v.WU)(new Date,"yyyy-MM-dd")),[r,d]=(0,n.useState)(null),[o,m]=(0,n.useState)(!1),[x,u]=(0,n.useState)(""),h=async()=>{if(!e||!s){alert("Please enter a total tip amount and select a date.");return}m(!0),u(""),d(null);try{let t=new Date(s),a=new Date(t.setHours(0,0,0,0)),n=(0,R.i)(t),l=i.EK.fromDate(a),r=i.EK.fromDate(n),o=(0,i.hJ)(c.db,"attendance"),x=(0,i.IO)(o,(0,i.ar)("scannedAt",">=",l),(0,i.ar)("scannedAt","<=",r)),h=await (0,i.PL)(x),f=new Set;h.forEach(e=>{f.add(e.data().staffId)});let p=f.size;if(0===p){u("No employees found with attendance records for this date."),m(!1);return}let j=Number(e)/p,y=Array.from(f).map(e=>({staffId:e,amount:j}));d(y)}catch(e){console.error("Error calculating tips:",e),u("Failed to calculate tip distribution.")}finally{m(!1)}};return(0,a.jsxs)(f.Z,{title:"Tip Distribution Calculator",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Tips in Pool"}),(0,a.jsx)(F.Z,{type:"number",value:e,onChange:e=>t(e.target.value),placeholder:"e.g., 15000"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"For Date"}),(0,a.jsx)(F.Z,{type:"date",value:s,onChange:e=>l(e.target.value)})]})]}),(0,a.jsx)("div",{className:"self-end",children:(0,a.jsxs)(p.Z,{onClick:h,disabled:o,children:[(0,a.jsx)(S.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:o?"Calculating...":"Calculate"})]})})]}),x&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:x}),r&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700",children:"Distribution Result:"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["Total of ",e," distributed among ",r.length," staff members."]}),(0,a.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-neo-bg shadow-neo-inset rounded-lg flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"font-medium text-gray-800 flex items-center",children:[(0,a.jsx)(H.Z,{className:"w-4 h-4 mr-2"}),e.staffId]}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:e.amount.toFixed(2)})]},t))})]})]})}var X=s(95252);function Y(e){let{setConfirmState:t,setSuccessMessage:s}=e,{t:l}=(0,r.$G)("common"),[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=(0,i.IO)((0,i.hJ)(c.db,"reimbursements"),(0,i.ar)("status","==","pending")),t=(0,i.cf)(e,e=>{o(e.docs.map(e=>({id:e.id,...e.data()}))),x(!1)});return()=>t()},[]);let u=(e,a)=>{t({isOpen:!0,title:"ConfirmAction",message:"ConfirmReimbursementRequest",options:{action:l(a),status:l(a)},onConfirm:async()=>{let n=(0,i.JU)(c.db,"reimbursements",e.id);await (0,i.r7)(n,{status:a}),s({key:"ReimbursementRequestProcessed",options:{status:l(a)}}),t({isOpen:!1})}})};return(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:l("PendingReimbursements")}),(0,a.jsx)(y.Z,{data:d,headers:[{label:"Request ID",key:"id"},{label:"Staff Name",key:"staffName"},{label:"Amount",key:"amount"},{label:"Reason",key:"reason"},{label:"Date",key:"requestedAt"}],filename:"pending_reimbursements.csv",children:l("ExportToCSV")})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[m&&(0,a.jsx)("p",{children:"Loading requests..."}),m||0!==d.length?d.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-neo-dark/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:e.staffName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 flex items-center",children:[(0,a.jsx)(X.Z,{className:"w-4 h-4 mr-1"})," ",l("Amount"),": ",(0,a.jsx)("span",{className:"font-medium ml-1",children:e.amount.toFixed(2)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{onClick:()=>u(e,"approved"),className:"!w-auto !p-2 !rounded-full !text-green-600",children:(0,a.jsx)(D.Z,{className:"w-5 h-5"})}),(0,a.jsx)(p.Z,{onClick:()=>u(e,"denied"),className:"!w-auto !p-2 !rounded-full !text-red-600",children:(0,a.jsx)(C.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2 italic",children:[l("ReasonForExpense"),": ",e.reason]})]},e.id)):(0,a.jsx)("p",{className:"text-center text-gray-500 py-4",children:l("NoPendingReimbursements")})]})]})}var ee=s(97983);function et(e){let{isOpen:t,onClose:s,staffMember:l,onSuccess:d}=e,{t:o}=(0,r.$G)("common"),[m,x]=(0,n.useState)({name:"",email:"",role:"",joinDate:""}),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{l&&x({name:l.name||"",email:l.email||"",role:l.role||"Staff",joinDate:l.joinDate?(0,v.WU)(l.joinDate.toDate(),"yyyy-MM-dd"):""})},[l]);let f=e=>{let{name:t,value:s}=e.target;x(e=>({...e,[t]:s}))},j=async e=>{if(e.preventDefault(),l){h(!0);try{let e=(0,i.JU)(c.db,"users",l.id);await (0,i.r7)(e,{name:m.name,email:m.email,role:m.role,joinDate:i.EK.fromDate(new Date(m.joinDate))}),d({key:"StaffDetailsUpdated"}),s()}catch(e){console.error("Error updating staff details:",e),alert("Failed to update details.")}finally{h(!1)}}};return(0,a.jsx)(ee.Z,{isOpen:t,onClose:s,title:"".concat(o("Edit")," ").concat(null==l?void 0:l.name),children:(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("FullName")}),(0,a.jsx)(F.Z,{type:"text",name:"name",value:m.name,onChange:f,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("Email")}),(0,a.jsx)(F.Z,{type:"email",name:"email",value:m.email,onChange:f})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("Role")}),(0,a.jsxs)(U.Z,{name:"role",value:m.role,onChange:f,children:[(0,a.jsx)("option",{children:"Staff"}),(0,a.jsx)("option",{children:"Front Desk"}),(0,a.jsx)("option",{children:"Management"}),(0,a.jsx)("option",{children:"Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("JoinDate")}),(0,a.jsx)(F.Z,{type:"date",name:"joinDate",value:m.joinDate,onChange:f,required:!0})]}),(0,a.jsxs)(p.Z,{type:"submit",disabled:u,children:[(0,a.jsx)(J.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:o(u?"Saving":"SaveChanges")})]})]})})}var es=s(41507),ea=s(80244);function en(e){let{isOpen:t,onClose:s,staffMember:l,onSuccess:r}=e,[d,o]=(0,n.useState)({baseSalary:"",overtimeRate:"",kpiBonus:""}),[m,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{l&&o({baseSalary:l.baseSalary||"",overtimeRate:l.overtimeRate||"",kpiBonus:l.kpiBonus||""})},[l]);let u=e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))},h=async e=>{if(e.preventDefault(),l){if(0>Number(d.baseSalary)||0>Number(d.overtimeRate)||0>Number(d.kpiBonus)){alert("Salary values cannot be negative.");return}x(!0);try{let e=(0,i.JU)(c.db,"users",l.id);await (0,i.r7)(e,{baseSalary:Number(d.baseSalary),overtimeRate:Number(d.overtimeRate),kpiBonus:Number(d.kpiBonus)}),r("Salary for ".concat(l.name," updated successfully!")),s()}catch(e){console.error("Error updating salary details:",e),alert("Failed to update details.")}finally{x(!1)}}};return(0,a.jsx)(ee.Z,{isOpen:t,onClose:s,title:"Edit Salary for ".concat(null==l?void 0:l.name),children:(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"baseSalary",className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Salary"}),(0,a.jsx)(F.Z,{type:"number",min:"0",id:"baseSalary",name:"baseSalary",value:d.baseSalary,onChange:u})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"overtimeRate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Overtime Rate (e.g., 1.5 for 1.5x)"}),(0,a.jsx)(F.Z,{type:"number",min:"0",id:"overtimeRate",name:"overtimeRate",step:"0.1",value:d.overtimeRate,onChange:u})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"kpiBonus",className:"block text-sm font-medium text-gray-700 mb-1",children:"KPI Bonus"}),(0,a.jsx)(F.Z,{type:"number",min:"0",id:"kpiBonus",name:"kpiBonus",value:d.kpiBonus,onChange:u})]}),(0,a.jsxs)(p.Z,{type:"submit",disabled:m,children:[(0,a.jsx)(J.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:m?"Saving...":"Save Changes"})]})]})})}let el=e=>(0,a.jsx)("textarea",{...e,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none text-sm"});function er(e){let{setSuccessMessage:t,onEdit:s,onDelete:d}=e,{t:o}=(0,r.$G)("common"),{user:m}=(0,l.t)(),[x,y]=(0,n.useState)(""),[b,g]=(0,n.useState)(""),[v,N]=(0,n.useState)(""),[w,S]=(0,n.useState)(!1),[k,D]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=(0,i.IO)((0,i.hJ)(c.db,"announcements"),(0,i.Xo)("createdAt","desc")),t=(0,i.cf)(e,e=>{D(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>t()},[]);let C=async e=>{if(e.preventDefault(),x.trim()&&b.trim()&&m){S(!0);try{await (0,i.ET)((0,i.hJ)(c.db,"announcements"),{title:x,content:b,authorId:m.uid,authorName:m.name,createdAt:i.EK.now(),expiresOn:v?i.EK.fromDate(new Date(v)):null}),t({key:"AnnouncementPosted"}),y(""),g(""),N("")}catch(e){console.error("Error posting announcement:",e)}finally{S(!1)}}};return(0,a.jsxs)(f.Z,{title:o("MakeAnnouncements"),children:[(0,a.jsxs)("form",{onSubmit:C,className:"space-y-4 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:o("Title")}),(0,a.jsx)(F.Z,{type:"text",value:x,onChange:e=>y(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:o("Content")}),(0,a.jsx)(el,{value:b,onChange:e=>g(e.target.value),rows:"4",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:[o("ExpiresOn")," (",o("ReasonOptional"),")"]}),(0,a.jsx)(F.Z,{type:"date",value:v,onChange:e=>N(e.target.value)})]}),(0,a.jsxs)(p.Z,{type:"submit",disabled:w,children:[(0,a.jsx)(z.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:w?o("Saving"):o("PostAnnouncement")})]})]}),(0,a.jsxs)("div",{className:"border-t border-neo-dark/20 pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:o("CurrentAnnouncements")}),(0,a.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:k.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-neo-dark/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("p",{className:"font-bold text-gray-800",children:e.title}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(p.Z,{onClick:()=>s(e),className:"!w-auto !p-2 !rounded-full !text-blue-600",children:(0,a.jsx)(u.Z,{className:"w-4 h-4"})}),(0,a.jsx)(p.Z,{onClick:()=>d(e),className:"!w-auto !p-2 !rounded-full !text-red-600",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.content}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:[o("PostedBy"),": ",e.authorName," on ",(0,j.p)(e.createdAt.toDate())]}),e.expiresOn&&(0,a.jsxs)("p",{className:"text-xs text-yellow-600 mt-1",children:["Expires: ",(0,j.p)(e.expiresOn.toDate())]})]},e.id))})]})]})}let ei=e=>(0,a.jsx)("textarea",{...e,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none text-sm"});function ec(e){let{isOpen:t,onClose:s,announcement:l,onSuccess:d}=e,{t:o}=(0,r.$G)("common"),[m,x]=(0,n.useState)({title:"",content:"",expiresOn:""}),[u,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{l&&x({title:l.title||"",content:l.content||"",expiresOn:l.expiresOn?(0,v.WU)(l.expiresOn.toDate(),"yyyy-MM-dd"):""})},[l]);let f=e=>{let{name:t,value:s}=e.target;x(e=>({...e,[t]:s}))},j=async e=>{if(e.preventDefault(),l){h(!0);try{let e=(0,i.JU)(c.db,"announcements",l.id);await (0,i.r7)(e,{title:m.title,content:m.content,expiresOn:m.expiresOn?i.EK.fromDate(new Date(m.expiresOn)):null}),d("Announcement updated successfully!"),s()}catch(e){console.error("Error updating announcement:",e)}finally{h(!1)}}};return(0,a.jsx)(ee.Z,{isOpen:t,onClose:s,title:"".concat(o("Edit")," ").concat(o("Announcement")),children:(0,a.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("Title")}),(0,a.jsx)(F.Z,{type:"text",name:"title",value:m.title,onChange:f,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("Content")}),(0,a.jsx)(ei,{name:"content",value:m.content,onChange:f,rows:"4",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:o("ExpiresOn")}),(0,a.jsx)(F.Z,{type:"date",name:"expiresOn",value:m.expiresOn,onChange:f})]}),(0,a.jsxs)(p.Z,{type:"submit",disabled:u,children:[(0,a.jsx)(J.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:o(u?"Saving":"SaveChanges")})]})]})})}let ed=e=>{let{activeTab:t,setActiveTab:s}=e,{t:n}=(0,r.$G)("common");return(0,a.jsx)("div",{className:"flex flex-wrap bg-neo-bg p-1 rounded-lg shadow-neo-inset-active",children:["Directory","Checklists","Performance","Attendance","Salary","Leave","Reimbursements","Tips","Kudos","Payroll","Announcements"].map(e=>(0,a.jsx)("button",{onClick:()=>s(e),className:"px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ".concat(t===e?"bg-neo-bg shadow-neo-md text-primary":"text-gray-600"),children:n(e)},e))})};function eo(){let{t:e}=(0,r.$G)("common"),{user:t}=(0,l.t)(),s=(null==t?void 0:t.role)==="Admin"||(null==t?void 0:t.role)==="Management",[d,o]=(0,n.useState)("Directory"),[m,x]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[f,p]=(0,n.useState)(!1),[j,y]=(0,n.useState)(null),[b,v]=(0,n.useState)(""),[N,w]=(0,n.useState)(!1),[S,D]=(0,n.useState)(null),[C,E]=(0,n.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[A,P]=(0,n.useState)(!1),[O,R]=(0,n.useState)(null),I=e=>{h(e),x(!0)},M=e=>{y(e),p(!0)},J=async()=>{j&&(await (0,i.oe)((0,i.JU)(c.db,"users",j.id)),y(null),p(!1))},F=e=>{D(e),w(!0)},U=e=>{R(e),P(!0)},_=e=>{E({isOpen:!0,title:"Delete Announcement",message:"Are you sure you want to delete this announcement?",onConfirm:async()=>{await (0,i.oe)((0,i.JU)(c.db,"announcements",e.id)),E({isOpen:!1})}})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-700 mb-6",style:{textShadow:"1px 1px 1px #ffffff"},children:e("HumanResourceManagement")}),s?(0,a.jsxs)("div",{children:[(0,a.jsx)(ed,{activeTab:d,setActiveTab:o}),(0,a.jsx)("div",{className:"mt-8",children:(()=>{switch(d){case"Directory":default:return(0,a.jsx)(g,{onEdit:I,onDelete:M});case"Checklists":return(0,a.jsx)(G,{setSuccessMessage:v});case"Performance":return(0,a.jsx)($,{setSuccessMessage:v});case"Attendance":return(0,a.jsx)(T,{});case"Salary":return(0,a.jsx)(L,{onEdit:F});case"Leave":return(0,a.jsx)(Z,{setConfirmState:E,setSuccessMessage:v});case"Reimbursements":return(0,a.jsx)(Y,{setConfirmState:E,setSuccessMessage:v});case"Tips":return(0,a.jsx)(Q,{});case"Kudos":return(0,a.jsx)(V,{setSuccessMessage:v});case"Payroll":return(0,a.jsx)(k,{setSuccessMessage:v});case"Announcements":return(0,a.jsx)(er,{setSuccessMessage:v,onEdit:U,onDelete:_})}})()})]}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(T,{}),(0,a.jsx)(V,{setSuccessMessage:v})]})]}),(0,a.jsx)(et,{isOpen:m,onClose:()=>x(!1),staffMember:u,onSuccess:v}),(0,a.jsx)(en,{isOpen:N,onClose:()=>w(!1),staffMember:S,onSuccess:v}),(0,a.jsx)(ec,{isOpen:A,onClose:()=>P(!1),announcement:O,onSuccess:v}),(0,a.jsx)(es.default,{isOpen:f,onClose:()=>p(!1),onConfirm:J,title:e("DeleteStaffMember"),children:e("DeleteStaffConfirm",{name:null==j?void 0:j.name})}),(0,a.jsx)(es.default,{isOpen:C.isOpen,onClose:()=>E({isOpen:!1}),onConfirm:C.onConfirm,title:e(C.title),children:e(C.message,C.options)}),(0,a.jsx)(ea.default,{isOpen:!!b,onClose:()=>v(""),title:e("Success"),children:e(b.key||b,b.options)})]})}},30387:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,title:s,className:n="",...l}=e;return(0,a.jsxs)("div",{className:"bg-neo-bg p-6 rounded-2xl shadow-neo-lg ".concat(n),...l,children:[s&&(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b border-neo-dark/50 pb-2",children:s}),(0,a.jsx)("div",{className:"text-gray-600",children:t})]})}},41507:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(57437),n=s(97983),l=e=>{let{children:t,onClick:s,type:n="button",variant:l="primary",className:r="",...i}=e;return(0,a.jsx)("button",{type:n,onClick:s,className:"".concat("flex items-center justify-center px-4 py-2 text-sm font-bold border-transparent rounded-lg shadow-neo-md bg-neo-bg transition-all active:shadow-neo-inset disabled:opacity-50"," ").concat({primary:"text-primary hover:text-indigo-600",secondary:"text-gray-700 hover:text-gray-900",danger:"text-red-600 hover:text-red-700"}[l]," ").concat(r),...i,children:t})},r=s(76865);function i(e){let{isOpen:t,onClose:s,onConfirm:i,title:c="Are you sure?",children:d}=e;return t?(0,a.jsxs)(n.Z,{isOpen:t,onClose:s,title:c,children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,a.jsx)(r.Z,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:c}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:d||"This action cannot be undone."})})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsx)(l,{type:"button",variant:"danger",onClick:i,children:"Confirm"}),(0,a.jsx)(l,{type:"button",variant:"secondary",onClick:s,children:"Cancel"})]})]}):null}},40673:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(57437),n=s(53359),l=s(57598),r=s(92735);function i(e){let{data:t,filename:s,headers:i}=e,c=Array.isArray(t)?t:[];return(0,a.jsx)(n.CSVLink,{data:c,headers:i,filename:s,className:"no-underline",target:"_blank",children:(0,a.jsxs)(l.Z,{className:"!w-auto !px-4 !py-2 !text-xs",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Export to CSV"]})})}},97983:function(e,t,s){"use strict";var a=s(57437),n=s(32489),l=s(30387);t.Z=e=>{let{isOpen:t,onClose:s,title:r,children:i}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.Z,{title:r,className:"w-full max-w-lg relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-neo-bg rounded-full shadow-neo-md text-gray-500 hover:text-red-500 active:shadow-neo-inset",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})}),(0,a.jsx)("div",{children:i})]})}):null}},57598:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,className:s="",...n}=e;return(0,a.jsx)("button",{...n,className:"w-full p-3 bg-neo-bg rounded-lg font-bold text-gray-700 shadow-neo-md transition-all hover:text-primary active:shadow-neo-inset disabled:opacity-50 flex items-center justify-center space-x-2 ".concat(s),children:t})}},63295:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{className:t="",...s}=e;return(0,a.jsx)("input",{...s,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none text-sm ".concat(t)})}},11511:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,className:s="",...n}=e;return(0,a.jsx)("select",{...n,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none appearance-none text-sm ".concat(s),children:t})}},80244:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(57437),n=s(97983),l=s(57598),r=s(41671);function i(e){let{isOpen:t,onClose:s,title:i="Success!",children:c,actions:d}=e;return t?(0,a.jsxs)(n.Z,{isOpen:t,onClose:s,title:i,children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,a.jsx)(r.Z,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:i}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:c})})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-6 space-y-2",children:[d,(0,a.jsx)(l.Z,{onClick:s,className:"!text-gray-700",children:"OK"})]})]}):null}},58856:function(e,t,s){"use strict";s.d(t,{t:function(){return i}});var a=s(59625),n=s(8858),l=s(5978),r=s(43301);let i=(0,a.Ue)(e=>({user:null,loading:!0,fetchUser:()=>{(0,r.Aj)(n.I8,async t=>{if(t){let s=(0,l.JU)(n.db,"users",t.uid),a=await (0,l.QT)(s);a.exists()?e({user:{uid:a.id,...a.data()},loading:!1}):((0,r.w7)(n.I8),e({user:null,loading:!1}))}else e({user:null,loading:!1})})},login:async(t,s,a)=>{e({loading:!0});try{let e=a?r.a$:r.aT;await (0,r.Fb)(n.I8,e),await (0,r.e5)(n.I8,t,s)}catch(t){throw console.error("Login failed:",t),e({user:null,loading:!1}),t}},logout:async()=>{e({loading:!0}),await (0,r.w7)(n.I8)}}));i.getState().fetchUser()},8858:function(e,t,s){"use strict";let a;s.d(t,{I8:function(){return c},db:function(){return d}});var n=s(738),l=s(43301),r=s(5978),i=s(13491);a=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyBc-lay18YWj7GGVQsMpeGOQ6FG2Bjv4Ug",authDomain:"vozz-os-template.firebaseapp.com",projectId:"vozz-os-template",storageBucket:"vozz-os-template.firebasestorage.app",messagingSenderId:"790770638358",appId:"1:790770638358:web:cb155fd1022b9d6eb39f37"});let c=(0,l.v0)(a),d=(0,r.ad)(a);(0,i.$C)(a)},66474:function(e,t,s){"use strict";s.d(t,{p:function(){return n},x:function(){return l}});var a=s(97112);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";return e?(0,a.WU)(new Date(e),t):""}function l(e){return"number"!=typeof e?"":e.toLocaleString("en-US")}}},function(e){e.O(0,[4358,9990,294,3949,7112,2085,9232,2971,2117,1744],function(){return e(e.s=46610)}),_N_E=e.O()}]);