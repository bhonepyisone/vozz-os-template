(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2501],{2156:function(e,t,s){Promise.resolve().then(s.bind(s,53001))},53001:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(57437),n=s(2265),l=s(43949),r=s(8858),i=s(5978),c=s(92369),d=s(89345),o=s(42449),m=s(86595),x=s(15868),u=s(30387),h=s(40673),p=s(57598);let f=e=>{let{tier:t}=e,{t:s}=(0,l.$G)("common");return(0,a.jsx)("span",{className:"px-2.5 py-1 text-xs font-bold rounded-full bg-neo-bg shadow-neo-md ".concat({Gold:"text-yellow-600",Silver:"text-gray-600",Bronze:"text-orange-700"}[t]||"text-gray-500"),children:s(t)})};function j(e){let{onEdit:t}=e,{t:s}=(0,l.$G)("common"),[j,g]=(0,n.useState)([]),[y,b]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let e=(0,i.hJ)(r.db,"customers"),t=(0,i.cf)(e,e=>{g(e.docs.map(e=>({id:e.id,...e.data()}))),b(!1)});return()=>t()},[]),y)?(0,a.jsx)("div",{className:"text-center text-gray-500 py-10",children:"Loading customers..."}):(0,a.jsxs)(u.Z,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:s("CustomerList")}),(0,a.jsx)(h.Z,{data:j,headers:[{label:"Customer ID",key:"id"},{label:"Name",key:"name"},{label:"Email",key:"email"},{label:"Total Spend",key:"totalSpend"},{label:"Tier",key:"tier"}],filename:"customers.csv",children:s("ExportToCSV")})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(c.Z,{className:"inline w-4 h-4 mr-1"}),s("FullName")]}),(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(d.Z,{className:"inline w-4 h-4 mr-1"}),"Email"]}),(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(o.Z,{className:"inline w-4 h-4 mr-1"}),s("TotalSpend")]}),(0,a.jsxs)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:[(0,a.jsx)(m.Z,{className:"inline w-4 h-4 mr-1"}),s("LoyaltyTier")]}),(0,a.jsx)("th",{className:"py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:s("Actions")})]})}),(0,a.jsx)("tbody",{children:j.map(e=>{var s;return(0,a.jsxs)("tr",{className:"border-t border-neo-dark/20",children:[(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm font-medium text-gray-800",children:e.name}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:null===(s=e.totalSpend)||void 0===s?void 0:s.toLocaleString()}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsx)(f,{tier:e.tier})}),(0,a.jsx)("td",{className:"py-4 whitespace-nowrap text-sm",children:(0,a.jsx)(p.Z,{onClick:()=>t(e),className:"!w-auto !p-2 !rounded-full !text-blue-600",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})})]},e.id)})})]})})]})}var g=s(70525);let y={BRONZE:{name:"Bronze",minSpend:0,color:"text-orange-700"},SILVER:{name:"Silver",minSpend:2e4,color:"text-gray-600"},GOLD:{name:"Gold",minSpend:5e4,color:"text-yellow-600"}},b=e=>e<y.SILVER.minSpend?y.SILVER:e<y.GOLD.minSpend?y.GOLD:null;function N(e){var t;let{customerName:s,currentSpend:n,currentTier:r}=e,{t:i}=(0,l.$G)("common"),c=b(n),d=0,o=0;if(c){let e="Silver"===r?y.BRONZE.minSpend:y.SILVER.minSpend;d=Math.min((n-e)/(c.minSpend-e)*100,100),o=c.minSpend-n}return(0,a.jsxs)(u.Z,{title:i("LoyaltyStatus"),children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-1",children:s}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:i("Status")}),(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(m.Z,{className:"w-10 h-10 mr-4 ".concat((null===(t=y[r.toUpperCase()])||void 0===t?void 0:t.color)||"text-gray-400")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[i("CurrentSpend"),": ",n.toLocaleString()]})]})]}),c?(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600 mb-1",children:[(0,a.jsxs)("span",{children:[i("Progress to")," ",i(c.name)]}),(0,a.jsxs)("span",{children:[Math.round(d),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-neo-bg rounded-full h-2.5 shadow-neo-inset",children:(0,a.jsx)("div",{className:"bg-primary h-2.5 rounded-full",style:{width:"".concat(d,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:[i("Spend")," ",o.toLocaleString()," ",i("more to reach")," ",i(c.name)," ",i("tier"),"!"]})]}):(0,a.jsxs)("div",{className:"text-center text-sm text-green-600 font-semibold flex items-center justify-center",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"})," ",i("You are at the highest tier!")]})]})}var v=s(97983),w=s(63295),S=s(83229);function Z(e){let{isOpen:t,onClose:s,customer:l,onSuccess:c}=e,[d,o]=(0,n.useState)({name:"",email:""}),[m,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{l&&o({name:l.name||"",email:l.email||""})},[l]);let u=e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))},h=async e=>{if(e.preventDefault(),l){x(!0);try{let e=(0,i.JU)(r.db,"customers",l.id);await (0,i.r7)(e,{name:d.name,email:d.email}),c('Customer "'.concat(d.name,'" updated successfully!')),s()}catch(e){console.error("Error updating customer:",e),alert("Failed to update customer details.")}finally{x(!1)}}};return(0,a.jsx)(v.Z,{isOpen:t,onClose:s,title:"Edit Customer: ".concat(null==l?void 0:l.name),children:(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name"}),(0,a.jsx)(w.Z,{type:"text",name:"name",value:d.name,onChange:u,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)(w.Z,{type:"email",name:"email",value:d.email,onChange:u})]}),(0,a.jsxs)(p.Z,{type:"submit",disabled:m,children:[(0,a.jsx)(S.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:m?"Saving...":"Save Changes"})]})]})})}var C=s(80244);function k(){let{t:e}=(0,l.$G)("common"),[t,s]=(0,n.useState)(!1),[r,i]=(0,n.useState)(null),[c,d]=(0,n.useState)("");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-700 mb-6",style:{textShadow:"1px 1px 1px #ffffff"},children:e("CRM")}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(j,{onEdit:e=>{i(e),s(!0)}})}),(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsx)(N,{customerName:"John Smith",currentSpend:52500,currentTier:"Gold"})})]})]}),(0,a.jsx)(Z,{isOpen:t,onClose:()=>s(!1),customer:r,onSuccess:d}),(0,a.jsx)(C.default,{isOpen:!!c,onClose:()=>d(""),title:"Success!",children:c})]})}},30387:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,title:s,className:n="",...l}=e;return(0,a.jsxs)("div",{className:"bg-neo-bg p-6 rounded-2xl shadow-neo-lg ".concat(n),...l,children:[s&&(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b border-neo-dark/50 pb-2",children:s}),(0,a.jsx)("div",{className:"text-gray-600",children:t})]})}},40673:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(57437),n=s(53359),l=s(57598),r=s(92735);function i(e){let{data:t,filename:s,headers:i}=e,c=Array.isArray(t)?t:[];return(0,a.jsx)(n.CSVLink,{data:c,headers:i,filename:s,className:"no-underline",target:"_blank",children:(0,a.jsxs)(l.Z,{className:"!w-auto !px-4 !py-2 !text-xs",children:[(0,a.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Export to CSV"]})})}},97983:function(e,t,s){"use strict";var a=s(57437),n=s(32489),l=s(30387);t.Z=e=>{let{isOpen:t,onClose:s,title:r,children:i}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)(l.Z,{title:r,className:"w-full max-w-lg relative",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-neo-bg rounded-full shadow-neo-md text-gray-500 hover:text-red-500 active:shadow-neo-inset",children:(0,a.jsx)(n.Z,{className:"w-5 h-5"})}),(0,a.jsx)("div",{children:i})]})}):null}},57598:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,className:s="",...n}=e;return(0,a.jsx)("button",{...n,className:"w-full p-3 bg-neo-bg rounded-lg font-bold text-gray-700 shadow-neo-md transition-all hover:text-primary active:shadow-neo-inset disabled:opacity-50 flex items-center justify-center space-x-2 ".concat(s),children:t})}},63295:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{className:t="",...s}=e;return(0,a.jsx)("input",{...s,className:"w-full my-1 p-3 bg-neo-bg rounded-lg shadow-neo-inset focus:outline-none text-sm ".concat(t)})}},80244:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(57437),n=s(97983),l=s(57598),r=s(41671);function i(e){let{isOpen:t,onClose:s,title:i="Success!",children:c,actions:d}=e;return t?(0,a.jsxs)(n.Z,{isOpen:t,onClose:s,title:i,children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:(0,a.jsx)(r.Z,{className:"h-6 w-6 text-green-600","aria-hidden":"true"})}),(0,a.jsxs)("div",{className:"mt-3 text-center sm:mt-5",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:i}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:c})})]})]}),(0,a.jsxs)("div",{className:"mt-5 sm:mt-6 space-y-2",children:[d,(0,a.jsx)(l.Z,{onClick:s,className:"!text-gray-700",children:"OK"})]})]}):null}},8858:function(e,t,s){"use strict";let a;s.d(t,{I8:function(){return c},db:function(){return d}});var n=s(738),l=s(43301),r=s(5978),i=s(13491);a=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyBc-lay18YWj7GGVQsMpeGOQ6FG2Bjv4Ug",authDomain:"vozz-os-template.firebaseapp.com",projectId:"vozz-os-template",storageBucket:"vozz-os-template.firebasestorage.app",messagingSenderId:"790770638358",appId:"1:790770638358:web:cb155fd1022b9d6eb39f37"});let c=(0,l.v0)(a),d=(0,r.ad)(a);(0,i.$C)(a)}},function(e){e.O(0,[4358,9990,294,3949,2013,2971,2117,1744],function(){return e(e.s=2156)}),_N_E=e.O()}]);