(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2646],{1722:function(e,t,s){Promise.resolve().then(s.bind(s,56304))},76865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},56304:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return A}});var a=s(57437),n=s(2265),r=s(8858),l=s(5978),o=s(43949),i=s(51817),c=s(66474),d=s(30387);let m=e=>{let{data:t}=e,{t:s}=(0,o.$G)("common");if(!t)return null;let n=t.totalRevenue-t.totalExpenses;return(0,a.jsxs)("div",{className:"p-4 bg-neo-bg shadow-neo-inset rounded-lg space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Financial Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"p-4 bg-neo-bg rounded-lg shadow-neo-md",children:[(0,a.jsx)("p",{className:"text-sm text-green-700",children:s("TotalRevenue")}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-800",children:(0,c.x)(t.totalRevenue)})]}),(0,a.jsxs)("div",{className:"p-4 bg-neo-bg rounded-lg shadow-neo-md",children:[(0,a.jsx)("p",{className:"text-sm text-red-700",children:s("TotalExpenses")}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-800",children:(0,c.x)(t.totalExpenses)})]}),(0,a.jsxs)("div",{className:"p-4 bg-neo-bg rounded-lg shadow-neo-md",children:[(0,a.jsx)("p",{className:"text-sm ".concat(n>=0?"text-blue-700":"text-orange-700"),children:s("NetProfit")}),(0,a.jsx)("p",{className:"text-2xl font-bold ".concat(n>=0?"text-blue-800":"text-orange-800"),children:(0,c.x)(n)})]})]})]})};function u(e){let{isLoading:t,reportData:s}=e,{t:n}=(0,o.$G)("common");return(0,a.jsx)(d.Z,{title:n("FinancialReport"),children:(0,a.jsx)("div",{children:t?(0,a.jsxs)("div",{className:"flex items-center justify-center py-10",children:[(0,a.jsx)(i.Z,{className:"w-8 h-8 text-primary animate-spin"}),(0,a.jsx)("p",{className:"ml-4 text-gray-500",children:"Generating report..."})]}):(0,a.jsx)(m,{data:s})})})}let x=(0,s(79205).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);var h=s(57598);function p(e){let{reportData:t}=e,[s,r]=(0,n.useState)(!1),[l,o]=(0,n.useState)(""),[c,m]=(0,n.useState)(""),u=async()=>{if(!t||"number"!=typeof t.totalRevenue||"number"!=typeof t.totalExpenses){m("Report data is not available or invalid. Please wait for the report to load.");return}r(!0),o(""),m("");let e="\n      As a business analyst for a restaurant, analyze the following financial data and provide actionable suggestions.\n      Focus on potential areas for cost savings, revenue growth, and improving profitability.\n\n      Data:\n      - Total Revenue: ".concat(t.totalRevenue,"\n      - Total Expenses: ").concat(t.totalExpenses,"\n      - Net Profit: ").concat(t.totalRevenue-t.totalExpenses,"\n\n      Provide the suggestions in a clear, concise, and easy-to-understand format. Use markdown for formatting if possible.\n    ");try{let t="AIzaSyAgFyO3UGmwQ58nZy0abtgnbAB07tm78yQ";if(!t)throw Error("Gemini API key is not configured.");let a=[];a.push({role:"user",parts:[{text:e}]});let n=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:a})}),r=await n.json();if(!n.ok){var s;throw console.error("Gemini API Error:",r),Error((null===(s=r.error)||void 0===s?void 0:s.message)||"API request failed with status ".concat(n.status))}if(r.candidates&&r.candidates.length>0&&r.candidates[0].content&&r.candidates[0].content.parts&&r.candidates[0].content.parts.length>0){let e=r.candidates[0].content.parts[0].text;o(e)}else throw Error("Received an invalid response from the API.")}catch(e){console.error("Error fetching AI suggestions:",e),m("Sorry, I couldn't generate suggestions. Error: ".concat(e.message))}finally{r(!1)}};return(0,a.jsxs)(d.Z,{title:"AI-Powered Suggestions",children:[(0,a.jsxs)(h.Z,{onClick:u,disabled:s||!t,className:"!text-secondary",children:[(0,a.jsx)(x,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:s?"Analyzing Data...":"Generate Suggestions"})]}),(0,a.jsxs)("div",{className:"mt-4",children:[s&&(0,a.jsx)("div",{className:"flex items-center justify-center py-10",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 text-secondary animate-spin"})}),c&&(0,a.jsx)("div",{className:"p-3 text-sm text-red-700 bg-red-100 rounded-md",children:c}),l&&(0,a.jsx)("div",{className:"p-4 bg-neo-bg shadow-neo-inset rounded-lg text-sm text-gray-700 prose prose-sm max-w-none",children:(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:l.replace(/\n/g,"<br />")}})})]})]})}var f=s(47625),g=s(77031),y=s(56940),j=s(97059),v=s(62994),b=s(20039),N=s(31699);function w(){let{t:e}=(0,o.$G)("common"),[t,s]=(0,n.useState)([]),[c,m]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{try{let e=await (0,l.PL)((0,l.hJ)(r.db,"sales")),t={};e.forEach(e=>{let s=e.data();s.items&&Array.isArray(s.items)&&s.items.forEach(e=>{e.name&&(t[e.name]=(t[e.name]||0)+e.quantity)})});let a=Object.entries(t).map(e=>{let[t,s]=e;return{name:t,count:s}}).sort((e,t)=>t.count-e.count).slice(0,5);s(a)}catch(e){console.error("Error fetching popular items data:",e)}finally{m(!1)}})()},[]),(0,a.jsx)(d.Z,{title:e("PopularMenuItems"),children:c?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 text-primary animate-spin"})}):(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(f.h,{width:"100%",height:"100%",children:(0,a.jsxs)(g.v,{data:t,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(y.q,{strokeDasharray:"3 3"}),(0,a.jsx)(j.K,{type:"number"}),(0,a.jsx)(v.B,{dataKey:"name",type:"category",width:80}),(0,a.jsx)(b.u,{cursor:{fill:"rgba(129, 140, 248, 0.1)"}}),(0,a.jsx)(N.$,{dataKey:"count",name:"Units Sold",fill:"#818cf8",barSize:30})]})})})})}var S=s(76865);function k(){let{t:e}=(0,o.$G)("common"),[t,s]=(0,n.useState)([]),[c,m]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let e=(0,l.hJ)(r.db,"inventory"),t=(0,l.cf)(e,e=>{s(e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>e.currentStock<=e.minStock)),m(!1)});return()=>t()},[]),(0,a.jsx)(d.Z,{title:e("InventorySummary"),children:c?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(i.Z,{className:"w-8 h-8 text-primary animate-spin"})}):(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:e("LowStockItems")}),t.length>0?(0,a.jsx)("div",{className:"space-y-3",children:t.map(t=>(0,a.jsxs)("div",{className:"p-3 bg-yellow-100/50 border border-yellow-300/50 rounded-lg flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(S.Z,{className:"w-5 h-5 mr-3 text-yellow-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-800",children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e("StockLevel"),": ",t.currentStock," / ",t.minStock," ",t.unit]})]})]}),(0,a.jsx)(h.Z,{className:"!w-auto !px-3 !py-1 !text-xs",children:e("Reorder")})]},t.id))}):(0,a.jsx)("p",{className:"text-center text-gray-500 h-full flex items-center justify-center",children:e("NoLowStockItems")})]})})}function A(){let{t:e}=(0,o.$G)("common"),[t,s]=(0,n.useState)(null),[i,c]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{c(!0);try{let e=(await (0,l.PL)((0,l.hJ)(r.db,"sales"))).docs.reduce((e,t)=>e+(t.data().totalAmount||0),0),t=(await (0,l.PL)((0,l.hJ)(r.db,"expenses"))).docs.reduce((e,t)=>e+(t.data().amount||0),0);s({totalRevenue:e,totalExpenses:t})}catch(e){console.error("Error fetching report data:",e)}finally{c(!1)}})()},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-700 mb-6",style:{textShadow:"1px 1px 1px #ffffff"},children:e("ReportsAndAnalytics")}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(u,{isLoading:i,reportData:t}),(0,a.jsx)(d.Z,{title:e("AI-PoweredSuggestions"),children:(0,a.jsx)(p,{reportData:t})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(w,{}),(0,a.jsx)(k,{})]})]})]})}},30387:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,title:s,className:n="",...r}=e;return(0,a.jsxs)("div",{className:"bg-neo-bg p-6 rounded-2xl shadow-neo-lg ".concat(n),...r,children:[s&&(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-4 border-b border-neo-dark/50 pb-2",children:s}),(0,a.jsx)("div",{className:"text-gray-600",children:t})]})}},57598:function(e,t,s){"use strict";var a=s(57437);t.Z=e=>{let{children:t,className:s="",...n}=e;return(0,a.jsx)("button",{...n,className:"w-full p-3 bg-neo-bg rounded-lg font-bold text-gray-700 shadow-neo-md transition-all hover:text-primary active:shadow-neo-inset disabled:opacity-50 flex items-center justify-center space-x-2 ".concat(s),children:t})}},8858:function(e,t,s){"use strict";let a;s.d(t,{I8:function(){return i},db:function(){return c}});var n=s(738),r=s(43301),l=s(5978),o=s(13491);a=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)({apiKey:"AIzaSyBc-lay18YWj7GGVQsMpeGOQ6FG2Bjv4Ug",authDomain:"vozz-os-template.firebaseapp.com",projectId:"vozz-os-template",storageBucket:"vozz-os-template.firebasestorage.app",messagingSenderId:"790770638358",appId:"1:790770638358:web:cb155fd1022b9d6eb39f37"});let i=(0,r.v0)(a),c=(0,l.ad)(a);(0,o.$C)(a)},66474:function(e,t,s){"use strict";s.d(t,{p:function(){return n},x:function(){return r}});var a=s(97112);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PPP";return e?(0,a.WU)(new Date(e),t):""}function r(e){return"number"!=typeof e?"":e.toLocaleString("en-US")}}},function(e){e.O(0,[4358,9990,294,3949,7112,4732,7031,2971,2117,1744],function(){return e(e.s=1722)}),_N_E=e.O()}]);