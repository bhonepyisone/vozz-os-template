(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{87545:function(e,n,t){Promise.resolve().then(t.t.bind(t,2778,23)),Promise.resolve().then(t.bind(t,84431)),Promise.resolve().then(t.bind(t,39755))},84431:function(e,n,t){"use strict";t.d(n,{default:function(){return l}});var s=t(57437),a=t(2265),i=t(58856),r=t(99376),u=t(51817);function l(e){let{children:n}=e,{user:t,loading:l,fetchUser:o}=(0,i.t)(),c=(0,r.usePathname)(),d=(0,r.useRouter)();return((0,a.useEffect)(()=>{o()},[o]),(0,a.useEffect)(()=>{if(l)return;let e=c.startsWith("/login"),n=c.startsWith("/admin");t||e?t&&(e?d.push("/dashboard"):n&&"Admin"!==t.role&&d.push("/dashboard")):d.push("/login")},[t,l,c,d]),l)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-neo-bg",children:(0,s.jsx)(u.Z,{className:"w-12 h-12 text-primary animate-spin"})}):n}},39755:function(e,n,t){"use strict";t.d(n,{default:function(){return d}});var s=t(57437),a=t(43949),i=t(46550),r=t(53690),u=t(69427);i.ZP.use(r.Z).use(u.Z).use(a.Db).init({fallbackLng:"en",supportedLngs:["en","th"],ns:["common"],defaultNS:"common",backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},debug:!1,interpolation:{escapeValue:!1}});var l=i.ZP,o=t(2265),c=t(51817);function d(e){let{children:n}=e;return(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)(c.Z,{className:"w-12 h-12 text-primary animate-spin"})}),children:(0,s.jsx)(a.a3,{i18n:l,children:n})})}},58856:function(e,n,t){"use strict";t.d(n,{t:function(){return u}});var s=t(59625),a=t(8858),i=t(5978),r=t(43301);let u=(0,s.Ue)(e=>({user:null,loading:!0,fetchUser:()=>{(0,r.Aj)(a.I8,async n=>{if(n){let t=(0,i.JU)(a.db,"users",n.uid),s=await (0,i.QT)(t);s.exists()?e({user:{uid:s.id,...s.data()},loading:!1}):((0,r.w7)(a.I8),e({user:null,loading:!1}))}else e({user:null,loading:!1})})},login:async(n,t,s)=>{e({loading:!0});try{let e=s?r.a$:r.aT;await (0,r.Fb)(a.I8,e),await (0,r.e5)(a.I8,n,t)}catch(n){throw console.error("Login failed:",n),e({user:null,loading:!1}),n}},logout:async()=>{e({loading:!0}),await (0,r.w7)(a.I8)}}));u.getState().fetchUser()},8858:function(e,n,t){"use strict";let s;t.d(n,{I8:function(){return l},db:function(){return o}});var a=t(738),i=t(43301),r=t(5978),u=t(13491);s=(0,a.C6)().length?(0,a.C6)()[0]:(0,a.ZF)({apiKey:"AIzaSyBc-lay18YWj7GGVQsMpeGOQ6FG2Bjv4Ug",authDomain:"vozz-os-template.firebaseapp.com",projectId:"vozz-os-template",storageBucket:"vozz-os-template.firebasestorage.app",messagingSenderId:"790770638358",appId:"1:790770638358:web:cb155fd1022b9d6eb39f37"});let l=(0,i.v0)(s),o=(0,r.ad)(s);(0,u.$C)(s)},2778:function(){}},function(e){e.O(0,[2461,4358,9990,294,3949,6554,2971,2117,1744],function(){return e(e.s=87545)}),_N_E=e.O()}]);